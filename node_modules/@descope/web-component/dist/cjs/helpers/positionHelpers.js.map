{"version":3,"file":"positionHelpers.js","sources":["../../../src/lib/helpers/positionHelpers.ts"],"sourcesContent":["type Boundary = number | 'all'; // all means that all the element is visible\ntype Boundaries = {\n  top?: Boundary;\n  left?: Boundary;\n  right?: Boundary;\n  bottom?: Boundary;\n};\n\nexport const limitCoordinateToScreenBoundaries = (\n  ele: HTMLElement,\n  x: number,\n  y: number,\n  boundaries: Boundaries = {},\n) => [\n  Math.min(\n    Math.max(\n      x,\n      (boundaries.left === 'all' ? ele.offsetWidth : boundaries.left ?? 0) -\n        ele.offsetWidth,\n    ),\n    window.innerWidth -\n      (boundaries.right === 'all' ? ele.offsetWidth : boundaries.right ?? 0),\n  ),\n  Math.min(\n    Math.max(\n      y,\n      (boundaries.top === 'all' ? ele.offsetHeight : boundaries.top ?? 0) -\n        ele.offsetHeight,\n    ),\n    window.innerHeight -\n      (boundaries.bottom === 'all' ? ele.offsetHeight : boundaries.bottom ?? 0),\n  ),\n];\n\nexport const dragElement = (\n  ele: HTMLElement,\n  triggerEle?: HTMLElement,\n  keepVisible?: Boundaries,\n) => {\n  let deltaX = 0;\n  let deltaY = 0;\n  let currentX = 0;\n  let currentY = 0;\n\n  function elementDrag(e: MouseEvent) {\n    e.preventDefault();\n    // calculate the new cursor position:\n    deltaX = currentX - e.clientX;\n    deltaY = currentY - e.clientY;\n    currentX = e.clientX;\n    currentY = e.clientY;\n    // set the element's new position:\n    const [left, top] = limitCoordinateToScreenBoundaries(\n      ele,\n      ele.offsetLeft - deltaX,\n      ele.offsetTop - deltaY,\n      keepVisible,\n    );\n    // eslint-disable-next-line no-param-reassign\n    ele.style.top = `${top}px`;\n    // eslint-disable-next-line no-param-reassign\n    ele.style.left = `${left}px`;\n  }\n\n  function closeDragElement() {\n    // stop moving when mouse button is released:\n    document.onmouseup = null;\n    document.onmousemove = null;\n  }\n\n  function dragMouseDown(e: MouseEvent) {\n    e.preventDefault();\n    // get the mouse cursor position at startup:\n    currentX = e.clientX;\n    currentY = e.clientY;\n    document.onmouseup = closeDragElement;\n    // call a function whenever the cursor moves:\n    document.onmousemove = elementDrag;\n  }\n\n  if (triggerEle) {\n    // if provided, the triggerEle is where you move the div from\n    // eslint-disable-next-line no-param-reassign\n    triggerEle.onmousedown = dragMouseDown;\n  } else {\n    // otherwise, move the DIV from anywhere inside the DIV:\n\n    // eslint-disable-next-line no-param-reassign\n    ele.onmousedown = dragMouseDown;\n  }\n};\n\nexport const addOnResize = (ele: HTMLElement) => {\n  // eslint-disable-next-line no-param-reassign\n  ele.onmousemove = (\n    e: MouseEvent & {\n      target: {\n        w: number;\n        h: number;\n        offsetWidth: number;\n        offsetHeight: number;\n      };\n    },\n  ) => {\n    if (\n      (e.target.w && e.target.w !== e.target.offsetWidth) ||\n      (e.target.h && e.target.h !== e.target.offsetHeight)\n    ) {\n      ele.onresize(e);\n    }\n    e.target.w = e.target.offsetWidth;\n    e.target.h = e.target.offsetHeight;\n  };\n};\n"],"names":["limitCoordinateToScreenBoundaries","ele","x","y","boundaries","Math","min","max","left","offsetWidth","_a","window","innerWidth","right","_b","top","offsetHeight","_c","innerHeight","bottom","_d","onmousemove","e","target","w","h","onresize","triggerEle","keepVisible","deltaX","deltaY","currentX","currentY","elementDrag","preventDefault","clientX","clientY","offsetLeft","offsetTop","style","closeDragElement","document","onmouseup","dragMouseDown","onmousedown"],"mappings":"aAQO,MAAMA,EAAoC,CAC/CC,EACAC,EACAC,EACAC,EAAyB,CAAA,iBACtB,MAAA,CACHC,KAAKC,IACHD,KAAKE,IACHL,GACqB,QAApBE,EAAWI,KAAiBP,EAAIQ,YAA6B,QAAfC,EAAAN,EAAWI,YAAI,IAAAE,EAAAA,EAAI,GAChET,EAAIQ,aAERE,OAAOC,YACiB,QAArBR,EAAWS,MAAkBZ,EAAIQ,YAA8B,QAAhBK,EAAAV,EAAWS,aAAK,IAAAC,EAAAA,EAAI,IAExET,KAAKC,IACHD,KAAKE,IACHJ,GACoB,QAAnBC,EAAWW,IAAgBd,EAAIe,aAA6B,QAAdC,EAAAb,EAAWW,WAAG,IAAAE,EAAAA,EAAI,GAC/DhB,EAAIe,cAERL,OAAOO,aACkB,QAAtBd,EAAWe,OAAmBlB,EAAIe,aAAgC,QAAjBI,EAAAhB,EAAWe,cAAM,IAAAC,EAAAA,EAAI,IAE5E,sBA4D2BnB,IAE1BA,EAAIoB,YACFC,KAUGA,EAAEC,OAAOC,GAAKF,EAAEC,OAAOC,IAAMF,EAAEC,OAAOd,aACtCa,EAAEC,OAAOE,GAAKH,EAAEC,OAAOE,IAAMH,EAAEC,OAAOP,eAEvCf,EAAIyB,SAASJ,GAEfA,EAAEC,OAAOC,EAAIF,EAAEC,OAAOd,YACtBa,EAAEC,OAAOE,EAAIH,EAAEC,OAAOP,YAAY,CACnC,sBA9EwB,CACzBf,EACA0B,EACAC,KAEA,IAAIC,EAAS,EACTC,EAAS,EACTC,EAAW,EACXC,EAAW,EAEf,SAASC,EAAYX,GACnBA,EAAEY,iBAEFL,EAASE,EAAWT,EAAEa,QACtBL,EAASE,EAAWV,EAAEc,QACtBL,EAAWT,EAAEa,QACbH,EAAWV,EAAEc,QAEb,MAAO5B,EAAMO,GAAOf,EAClBC,EACAA,EAAIoC,WAAaR,EACjB5B,EAAIqC,UAAYR,EAChBF,GAGF3B,EAAIsC,MAAMxB,IAAM,GAAGA,MAEnBd,EAAIsC,MAAM/B,KAAO,GAAGA,KACrB,CAED,SAASgC,IAEPC,SAASC,UAAY,KACrBD,SAASpB,YAAc,IACxB,CAED,SAASsB,EAAcrB,GACrBA,EAAEY,iBAEFH,EAAWT,EAAEa,QACbH,EAAWV,EAAEc,QACbK,SAASC,UAAYF,EAErBC,SAASpB,YAAcY,CACxB,CAEGN,EAGFA,EAAWiB,YAAcD,EAKzB1C,EAAI2C,YAAcD,CACnB"}