{"version":3,"file":"formMountMixin.js","sources":["../../../src/lib/mixins/formMountMixin.ts"],"sourcesContent":["/* eslint-disable import/prefer-default-export */\nimport { createSingletonMixin } from '@descope/sdk-helpers';\nimport { isChromium } from '../helpers';\n\nexport const formMountMixin = createSingletonMixin(\n  <T extends CustomElementConstructor>(superclass: T) =>\n    class FormMountMixin extends superclass {\n      #shouldMountInFormEle() {\n        const wc = this.shadowRoot.host;\n        return !wc.closest('form') && isChromium();\n      }\n\n      // we want to make sure the web-component is wrapped with on outer form element\n      // this is needed in order to support webauthn conditional UI (which currently supported only in Chrome when input is inside a web-component)\n      // for more info see here: https://github.com/descope/etc/issues/733\n      #handleOuterForm() {\n        const wc = this.shadowRoot.host;\n        const form = document.createElement('form');\n        form.style.width = '100%';\n        form.style.height = '100%';\n        wc.parentElement.appendChild(form);\n        form.appendChild(wc);\n      }\n\n      connectedCallback() {\n        if (this.#shouldMountInFormEle()) {\n          this.#handleOuterForm();\n        }\n        super.connectedCallback?.();\n      }\n    },\n);\n"],"names":["formMountMixin","createSingletonMixin","superclass","_FormMountMixin_instances","_FormMountMixin_shouldMountInFormEle","_FormMountMixin_handleOuterForm","_a","constructor","connectedCallback","__classPrivateFieldGet","this","call","_b","super","shadowRoot","host","closest","isChromium","wc","form","document","createElement","style","width","height","parentElement","appendChild"],"mappings":"+TAIO,MAAMA,EAAiBC,GACSC,IAAiB,IAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAA,EACpD,cAA6BJ,EAA7B,WAAAK,kCAwBC,CANC,iBAAAC,SACMC,EAAAC,KAAIP,EAAA,IAAAC,QAAJM,OACFD,EAAAC,KAAIP,EAAA,IAAAE,GAAJM,KAAAD,MAEqB,QAAvBE,EAAAC,MAAML,yBAAiB,IAAAI,GAAAA,EAAAD,KAAAD,KACxB,8BApBC,OADWA,KAAKI,WAAWC,KAChBC,QAAQ,SAAWC,GAC/B,eAMC,MAAMC,EAAKR,KAAKI,WAAWC,KACrBI,EAAOC,SAASC,cAAc,QACpCF,EAAKG,MAAMC,MAAQ,OACnBJ,EAAKG,MAAME,OAAS,OACpBN,EAAGO,cAAcC,YAAYP,GAC7BA,EAAKO,YAAYR,EAClB,EAQFZ,CAAA"}