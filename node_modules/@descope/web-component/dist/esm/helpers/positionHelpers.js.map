{"version":3,"file":"positionHelpers.js","sources":["../../../src/lib/helpers/positionHelpers.ts"],"sourcesContent":["type Boundary = number | 'all'; // all means that all the element is visible\ntype Boundaries = {\n  top?: Boundary;\n  left?: Boundary;\n  right?: Boundary;\n  bottom?: Boundary;\n};\n\nexport const limitCoordinateToScreenBoundaries = (\n  ele: HTMLElement,\n  x: number,\n  y: number,\n  boundaries: Boundaries = {},\n) => [\n  Math.min(\n    Math.max(\n      x,\n      (boundaries.left === 'all' ? ele.offsetWidth : boundaries.left ?? 0) -\n        ele.offsetWidth,\n    ),\n    window.innerWidth -\n      (boundaries.right === 'all' ? ele.offsetWidth : boundaries.right ?? 0),\n  ),\n  Math.min(\n    Math.max(\n      y,\n      (boundaries.top === 'all' ? ele.offsetHeight : boundaries.top ?? 0) -\n        ele.offsetHeight,\n    ),\n    window.innerHeight -\n      (boundaries.bottom === 'all' ? ele.offsetHeight : boundaries.bottom ?? 0),\n  ),\n];\n\nexport const dragElement = (\n  ele: HTMLElement,\n  triggerEle?: HTMLElement,\n  keepVisible?: Boundaries,\n) => {\n  let deltaX = 0;\n  let deltaY = 0;\n  let currentX = 0;\n  let currentY = 0;\n\n  function elementDrag(e: MouseEvent) {\n    e.preventDefault();\n    // calculate the new cursor position:\n    deltaX = currentX - e.clientX;\n    deltaY = currentY - e.clientY;\n    currentX = e.clientX;\n    currentY = e.clientY;\n    // set the element's new position:\n    const [left, top] = limitCoordinateToScreenBoundaries(\n      ele,\n      ele.offsetLeft - deltaX,\n      ele.offsetTop - deltaY,\n      keepVisible,\n    );\n    // eslint-disable-next-line no-param-reassign\n    ele.style.top = `${top}px`;\n    // eslint-disable-next-line no-param-reassign\n    ele.style.left = `${left}px`;\n  }\n\n  function closeDragElement() {\n    // stop moving when mouse button is released:\n    document.onmouseup = null;\n    document.onmousemove = null;\n  }\n\n  function dragMouseDown(e: MouseEvent) {\n    e.preventDefault();\n    // get the mouse cursor position at startup:\n    currentX = e.clientX;\n    currentY = e.clientY;\n    document.onmouseup = closeDragElement;\n    // call a function whenever the cursor moves:\n    document.onmousemove = elementDrag;\n  }\n\n  if (triggerEle) {\n    // if provided, the triggerEle is where you move the div from\n    // eslint-disable-next-line no-param-reassign\n    triggerEle.onmousedown = dragMouseDown;\n  } else {\n    // otherwise, move the DIV from anywhere inside the DIV:\n\n    // eslint-disable-next-line no-param-reassign\n    ele.onmousedown = dragMouseDown;\n  }\n};\n\nexport const addOnResize = (ele: HTMLElement) => {\n  // eslint-disable-next-line no-param-reassign\n  ele.onmousemove = (\n    e: MouseEvent & {\n      target: {\n        w: number;\n        h: number;\n        offsetWidth: number;\n        offsetHeight: number;\n      };\n    },\n  ) => {\n    if (\n      (e.target.w && e.target.w !== e.target.offsetWidth) ||\n      (e.target.h && e.target.h !== e.target.offsetHeight)\n    ) {\n      ele.onresize(e);\n    }\n    e.target.w = e.target.offsetWidth;\n    e.target.h = e.target.offsetHeight;\n  };\n};\n"],"names":["limitCoordinateToScreenBoundaries","ele","x","y","boundaries","Math","min","max","left","offsetWidth","_a","window","innerWidth","right","_b","top","offsetHeight","_c","innerHeight","bottom","_d","dragElement","triggerEle","keepVisible","deltaX","deltaY","currentX","currentY","elementDrag","e","preventDefault","clientX","clientY","offsetLeft","offsetTop","style","closeDragElement","document","onmouseup","onmousemove","dragMouseDown","onmousedown","addOnResize","target","w","h","onresize"],"mappings":"AAQO,MAAMA,EAAoC,CAC/CC,EACAC,EACAC,EACAC,EAAyB,CAAA,iBACtB,MAAA,CACHC,KAAKC,IACHD,KAAKE,IACHL,GACqB,QAApBE,EAAWI,KAAiBP,EAAIQ,YAA6B,QAAfC,EAAAN,EAAWI,YAAI,IAAAE,EAAAA,EAAI,GAChET,EAAIQ,aAERE,OAAOC,YACiB,QAArBR,EAAWS,MAAkBZ,EAAIQ,YAA8B,QAAhBK,EAAAV,EAAWS,aAAK,IAAAC,EAAAA,EAAI,IAExET,KAAKC,IACHD,KAAKE,IACHJ,GACoB,QAAnBC,EAAWW,IAAgBd,EAAIe,aAA6B,QAAdC,EAAAb,EAAWW,WAAG,IAAAE,EAAAA,EAAI,GAC/DhB,EAAIe,cAERL,OAAOO,aACkB,QAAtBd,EAAWe,OAAmBlB,EAAIe,aAAgC,QAAjBI,EAAAhB,EAAWe,cAAM,IAAAC,EAAAA,EAAI,IAE5E,EAEYC,EAAc,CACzBpB,EACAqB,EACAC,KAEA,IAAIC,EAAS,EACTC,EAAS,EACTC,EAAW,EACXC,EAAW,EAEf,SAASC,EAAYC,GACnBA,EAAEC,iBAEFN,EAASE,EAAWG,EAAEE,QACtBN,EAASE,EAAWE,EAAEG,QACtBN,EAAWG,EAAEE,QACbJ,EAAWE,EAAEG,QAEb,MAAOxB,EAAMO,GAAOf,EAClBC,EACAA,EAAIgC,WAAaT,EACjBvB,EAAIiC,UAAYT,EAChBF,GAGFtB,EAAIkC,MAAMpB,IAAM,GAAGA,MAEnBd,EAAIkC,MAAM3B,KAAO,GAAGA,KACrB,CAED,SAAS4B,IAEPC,SAASC,UAAY,KACrBD,SAASE,YAAc,IACxB,CAED,SAASC,EAAcX,GACrBA,EAAEC,iBAEFJ,EAAWG,EAAEE,QACbJ,EAAWE,EAAEG,QACbK,SAASC,UAAYF,EAErBC,SAASE,YAAcX,CACxB,CAEGN,EAGFA,EAAWmB,YAAcD,EAKzBvC,EAAIwC,YAAcD,CACnB,EAGUE,EAAezC,IAE1BA,EAAIsC,YACFV,KAUGA,EAAEc,OAAOC,GAAKf,EAAEc,OAAOC,IAAMf,EAAEc,OAAOlC,aACtCoB,EAAEc,OAAOE,GAAKhB,EAAEc,OAAOE,IAAMhB,EAAEc,OAAO3B,eAEvCf,EAAI6C,SAASjB,GAEfA,EAAEc,OAAOC,EAAIf,EAAEc,OAAOlC,YACtBoB,EAAEc,OAAOE,EAAIhB,EAAEc,OAAO3B,YAAY,CACnC"}