{"version":3,"file":"formMixin.js","sources":["../../../src/mixins/formMixin.ts"],"sourcesContent":["import { createSingletonMixin } from '@descope/sdk-helpers';\nimport { loggerMixin } from './loggerMixin';\n\ntype ElementOrEmpty = Element | null | undefined;\n\nexport const formMixin = createSingletonMixin(\n  <T extends CustomElementConstructor>(superclass: T) =>\n    class FormMixinClass extends loggerMixin(superclass) {\n      validateForm(rootEle: ElementOrEmpty) {\n        return this.getFormInputs(rootEle).every((input: HTMLInputElement) => {\n          input.reportValidity?.();\n          return input.checkValidity?.();\n        });\n      }\n\n      // eslint-disable-next-line class-methods-use-this\n      getFormInputs(rootEle: ElementOrEmpty): HTMLInputElement[] {\n        if (!rootEle) {\n          this.logger.debug(\n            'cannot get form inputs, no root element was received',\n          );\n          return [];\n        }\n        return Array.from(\n          rootEle.querySelectorAll('[name]'),\n        ) as HTMLInputElement[];\n      }\n\n      getFormData(rootEle: ElementOrEmpty): any {\n        return this.getFormInputs(rootEle).reduce(\n          (acc, input) =>\n            Object.assign(acc, { [input.getAttribute('name')!]: input.value }),\n          {},\n        );\n      }\n\n      setFormData(rootEle: ElementOrEmpty, data: Record<string, any>) {\n        this.getFormInputs(rootEle).forEach((input) => {\n          // eslint-disable-next-line no-prototype-builtins\n          if (data.hasOwnProperty(input.getAttribute('name')!)) {\n            // eslint-disable-next-line no-param-reassign\n            input.value = data[input.getAttribute('name')!];\n          }\n        });\n      }\n\n      resetFormData(rootEle: ElementOrEmpty) {\n        this.getFormInputs(rootEle).forEach((input) => {\n          // eslint-disable-next-line no-param-reassign\n          input.value = '';\n          input.checked = false;\n        });\n      }\n\n      getFormFieldNames(rootEle: ElementOrEmpty) {\n        return this.getFormInputs(rootEle).map((ele) => ele.name);\n      }\n\n      disableFormField(rootEle: ElementOrEmpty, name: string) {\n        this.getFormInputs(rootEle)\n          .find((input) => input.name === name)\n          ?.setAttribute('disabled', 'true');\n      }\n\n      removeFormField(rootEle: ElementOrEmpty, name: string) {\n        this.getFormInputs(rootEle)\n          .find((input) => input.name === name)\n          ?.remove();\n      }\n    },\n);\n"],"names":["createSingletonMixin","loggerMixin"],"mappings":";;;;;AAKa,MAAA,SAAS,GAAGA,+BAAoB,CAC3C,CAAqC,UAAa,KAChD,MAAM,cAAe,SAAQC,uBAAW,CAAC,UAAU,CAAC,CAAA;AAClD,IAAA,YAAY,CAAC,OAAuB,EAAA;AAClC,QAAA,OAAO,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,KAAuB,KAAI;;AACnE,YAAA,CAAA,EAAA,GAAA,KAAK,CAAC,cAAc,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,IAAA,CAAA,KAAA,CAAI,CAAC;AACzB,YAAA,OAAO,CAAA,EAAA,GAAA,KAAK,CAAC,aAAa,qDAAI,CAAC;AACjC,SAAC,CAAC,CAAC;KACJ;;AAGD,IAAA,aAAa,CAAC,OAAuB,EAAA;QACnC,IAAI,CAAC,OAAO,EAAE;AACZ,YAAA,IAAI,CAAC,MAAM,CAAC,KAAK,CACf,sDAAsD,CACvD,CAAC;AACF,YAAA,OAAO,EAAE,CAAC;SACX;QACD,OAAO,KAAK,CAAC,IAAI,CACf,OAAO,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CACb,CAAC;KACzB;AAED,IAAA,WAAW,CAAC,OAAuB,EAAA;AACjC,QAAA,OAAO,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,MAAM,CACvC,CAAC,GAAG,EAAE,KAAK,KACT,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,EAAE,CAAC,KAAK,CAAC,YAAY,CAAC,MAAM,CAAE,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC,EACpE,EAAE,CACH,CAAC;KACH;IAED,WAAW,CAAC,OAAuB,EAAE,IAAyB,EAAA;QAC5D,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,KAAK,KAAI;;AAE5C,YAAA,IAAI,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,YAAY,CAAC,MAAM,CAAE,CAAC,EAAE;;AAEpD,gBAAA,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,MAAM,CAAE,CAAC,CAAC;aACjD;AACH,SAAC,CAAC,CAAC;KACJ;AAED,IAAA,aAAa,CAAC,OAAuB,EAAA;QACnC,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,KAAK,KAAI;;AAE5C,YAAA,KAAK,CAAC,KAAK,GAAG,EAAE,CAAC;AACjB,YAAA,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC;AACxB,SAAC,CAAC,CAAC;KACJ;AAED,IAAA,iBAAiB,CAAC,OAAuB,EAAA;AACvC,QAAA,OAAO,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC;KAC3D;IAED,gBAAgB,CAAC,OAAuB,EAAE,IAAY,EAAA;;AACpD,QAAA,CAAA,EAAA,GAAA,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC;AACxB,aAAA,IAAI,CAAC,CAAC,KAAK,KAAK,KAAK,CAAC,IAAI,KAAK,IAAI,CAAC,0CACnC,YAAY,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;KACtC;IAED,eAAe,CAAC,OAAuB,EAAE,IAAY,EAAA;;AACnD,QAAA,CAAA,EAAA,GAAA,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC;AACxB,aAAA,IAAI,CAAC,CAAC,KAAK,KAAK,KAAK,CAAC,IAAI,KAAK,IAAI,CAAC,MACnC,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,MAAM,EAAE,CAAC;KACd;AACF,CAAA;;;;"}