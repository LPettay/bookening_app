{"version":3,"file":"cspNonceMixin.js","sources":["../../../src/mixins/cspNonceMixin.ts"],"sourcesContent":["import { compose, createSingletonMixin } from '@descope/sdk-helpers';\nimport { initLifecycleMixin } from './initLifecycleMixin';\nimport { observeAttributesMixin } from './observeAttributesMixin';\n\nexport const cspNonceMixin = createSingletonMixin(\n  <T extends CustomElementConstructor>(superclass: T) => {\n    const BaseClass = compose(\n      initLifecycleMixin,\n      observeAttributesMixin,\n    )(superclass);\n\n    return class CspNonceMixinClass extends BaseClass {\n      get nonce(): string {\n        return this.getAttribute('nonce') || '';\n      }\n\n      #setNonce() {\n        (window as any).DESCOPE_NONCE = this.nonce;\n      }\n\n      async init() {\n        await super.init?.();\n\n        this.observeAttribute('nonce', this.#setNonce.bind(this));\n        this.#setNonce();\n      }\n    };\n  },\n);\n"],"names":[],"mappings":";;;;;MAIa,aAAa,GAAG,oBAAoB,CAC/C,CAAqC,UAAa,KAAI;;IACpD,MAAM,SAAS,GAAG,OAAO,CACvB,kBAAkB,EAClB,sBAAsB,CACvB,CAAC,UAAU,CAAC,CAAC;IAEd,OAAO,EAAA,GAAA,MAAM,kBAAmB,SAAQ,SAAS,CAAA;AAA1C,YAAA,WAAA,GAAA;;;aAeN;AAdC,YAAA,IAAI,KAAK,GAAA;gBACP,OAAO,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;aACzC;AAMD,YAAA,MAAM,IAAI,GAAA;;AACR,gBAAA,OAAM,CAAA,EAAA,GAAA,KAAK,CAAC,IAAI,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,IAAA,CAAA,IAAA,CAAI,CAAA,CAAC;AAErB,gBAAA,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,sBAAA,CAAA,IAAI,EAAU,6BAAA,EAAA,GAAA,EAAA,4BAAA,CAAA,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AAC1D,gBAAA,sBAAA,CAAA,IAAI,EAAA,6BAAA,EAAA,GAAA,EAAA,4BAAA,CAAU,CAAd,IAAA,CAAA,IAAI,CAAY,CAAC;aAClB;AACF,SAAA;;;AATI,YAAA,MAAc,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC;SAC5C;AAQD,QAAA,EAAA,CAAA;AACJ,CAAC;;;;"}