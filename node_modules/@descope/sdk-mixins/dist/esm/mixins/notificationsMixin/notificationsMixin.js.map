{"version":3,"file":"notificationsMixin.js","sources":["../../../../src/mixins/notificationsMixin/notificationsMixin.ts"],"sourcesContent":["// eslint-disable-next-line max-classes-per-file\nimport {\n  createSingletonMixin,\n  compose,\n  createTemplate,\n} from '@descope/sdk-helpers';\nimport { initLifecycleMixin } from '../initLifecycleMixin';\nimport { initElementMixin } from '../initElementMixin';\nimport { descopeUiMixin } from '../descopeUiMixin';\nimport { createNotificationEle } from './helpers';\nimport { NOTIFICATION_ELE_TAG } from './constants';\nimport { NotificationDriver } from '@descope/sdk-component-drivers';\n\nexport const notificationsMixin = createSingletonMixin(\n  <T extends CustomElementConstructor>(superclass: T) => {\n    const BaseClass = compose(\n      initLifecycleMixin,\n      initElementMixin,\n      descopeUiMixin,\n    )(superclass);\n    return class NotificationsMixinClass extends BaseClass {\n      #NotificationDriverWrapper = (() => {\n        const loadDescopeUiComponents = this.loadDescopeUiComponents.bind(this);\n        return class NotificationDriverWrapper extends NotificationDriver {\n          setContent(templateOrString: HTMLTemplateElement | string) {\n            const template =\n              typeof templateOrString === 'string'\n                ? createTemplate(templateOrString)\n                : templateOrString;\n\n            loadDescopeUiComponents(template);\n            super.setContent(template);\n          }\n        };\n      })();\n\n      createNotification(\n        config?: {\n          mode: 'success' | 'error';\n          duration: number;\n          'has-close-button'?: boolean;\n          position?:\n            | 'top-stretch'\n            | 'top-start'\n            | 'top-center'\n            | 'top-end'\n            | 'middle'\n            | 'bottom-start'\n            | 'bottom-center'\n            | 'bottom-end'\n            | 'bottom-stretch';\n          size: 'xs' | 'sm' | 'md' | 'lg';\n          bordered?: boolean;\n        } & {\n          [key: string]: string | boolean | number;\n        },\n      ) {\n        const baseConfig = {};\n\n        const notification = createNotificationEle({\n          ...baseConfig,\n          ...config,\n        });\n\n        this.rootElement.append(notification);\n\n        return new this.#NotificationDriverWrapper(notification, {\n          logger: this.logger,\n        });\n      }\n\n      async init() {\n        await super.init?.();\n        this.loadDescopeUiComponents([NOTIFICATION_ELE_TAG]);\n      }\n    };\n  },\n);\n"],"names":[],"mappings":";;;;;;;;;MAaa,kBAAkB,GAAG,oBAAoB,CACpD,CAAqC,UAAa,KAAI;;AACpD,IAAA,MAAM,SAAS,GAAG,OAAO,CACvB,kBAAkB,EAClB,gBAAgB,EAChB,cAAc,CACf,CAAC,UAAU,CAAC,CAAC;IACd,OAAO,EAAA,GAAA,MAAM,uBAAwB,SAAQ,SAAS,CAAA;AAA/C,YAAA,WAAA,GAAA;;gBACL,kDAA6B,CAAA,GAAA,CAAA,IAAA,EAAA,CAAC,MAAK;oBACjC,MAAM,uBAAuB,GAAG,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACxE,OAAO,MAAM,yBAA0B,SAAQ,kBAAkB,CAAA;AAC/D,wBAAA,UAAU,CAAC,gBAA8C,EAAA;AACvD,4BAAA,MAAM,QAAQ,GACZ,OAAO,gBAAgB,KAAK,QAAQ;AAClC,kCAAE,cAAc,CAAC,gBAAgB,CAAC;kCAChC,gBAAgB,CAAC;4BAEvB,uBAAuB,CAAC,QAAQ,CAAC,CAAC;AAClC,4BAAA,KAAK,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;yBAC5B;qBACF,CAAC;iBACH,GAAG,CAAC,CAAA;aAyCN;AAvCC,YAAA,kBAAkB,CAChB,MAkBC,EAAA;gBAED,MAAM,UAAU,GAAG,EAAE,CAAC;gBAEtB,MAAM,YAAY,GAAG,qBAAqB,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EACrC,UAAU,CACV,EAAA,MAAM,EACT,CAAC;AAEH,gBAAA,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;AAEtC,gBAAA,OAAO,KAAI,sBAAA,CAAA,IAAI,EAA2B,kDAAA,EAAA,GAAA,CAAA,EAAC,YAAY,EAAE;oBACvD,MAAM,EAAE,IAAI,CAAC,MAAM;AACpB,iBAAA,CAAC,CAAC;aACJ;AAED,YAAA,MAAM,IAAI,GAAA;;AACR,gBAAA,OAAM,CAAA,EAAA,GAAA,KAAK,CAAC,IAAI,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,IAAA,CAAA,IAAA,CAAI,CAAA,CAAC;AACrB,gBAAA,IAAI,CAAC,uBAAuB,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC;aACtD;AACF,SAAA;;AAAC,QAAA,EAAA,CAAA;AACJ,CAAC;;;;"}