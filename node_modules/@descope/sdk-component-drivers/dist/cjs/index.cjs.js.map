{"version":3,"file":"index.cjs.js","sources":["../../src/BaseDriver.ts","../../src/helpers.ts","../../src/ButtonDriver.ts","../../src/gridDrivers/GridDriver.ts","../../src/gridDrivers/GridTextColumnDriver.ts","../../src/gridDrivers/GridCustomColumnDriver.ts","../../src/AppsListDriver.ts","../../src/AvatarDriver.ts","../../src/FlowDriver.ts","../../src/GenericFlowButtonDriver.ts","../../src/LinkDriver.ts","../../src/ModalDriver.ts","../../src/MultiSelectDriver.ts","../../src/NotificationDriver.ts","../../src/OutboundAppsListDriver.ts","../../src/SingleSelectDriver.ts","../../src/TextDriver.ts","../../src/TextFieldDriver.ts","../../src/UserAttributeDriver.ts","../../src/UserAuthMethodDriver.ts"],"sourcesContent":["import { waitForElement } from './helpers';\nimport { RefOrRefFn } from './types';\n\ntype Logger = {\n  error(...data: any[]): void;\n  warn(...data: any[]): void;\n  info(...data: any[]): void;\n  debug(...data: any[]): void;\n};\n\nexport class BaseDriver {\n  #ele: RefOrRefFn;\n\n  logger: Logger | undefined;\n\n  // eslint-disable-next-line class-methods-use-this\n  nodeName = '';\n\n  constructor(refOrRefFn: RefOrRefFn, config: { logger: Logger }) {\n    this.#ele = refOrRefFn;\n    this.logger = config.logger;\n  }\n\n  get asyncEle() {\n    return waitForElement(this.#ele, 1000);\n  }\n\n  get ele() {\n    const ele = typeof this.#ele === 'function' ? this.#ele() : this.#ele;\n    if (!ele) {\n      this.logger?.debug(\n        `Driver element is not available for ${this.nodeName}`,\n        new Error(),\n      );\n\n      return null;\n    }\n\n    if (ele?.localName !== this.nodeName) {\n      this.logger?.debug(\n        `node name do not match, expected \"${this.nodeName}\", received \"${ele.localName}\" `,\n        Error(),\n      );\n\n      return null;\n    }\n\n    return ele;\n  }\n}\n","import { RefOrRefFn } from './types';\n\nexport const waitForElement = async (ele: RefOrRefFn, timeout: number) =>\n  new Promise<Element | null>((resolve) => {\n    const interval = setInterval(() => {\n      const element = typeof ele === 'function' ? ele() : ele;\n      if (element) {\n        clearInterval(interval);\n        resolve(element);\n      }\n    }, 100);\n    setTimeout(() => {\n      clearInterval(interval);\n      resolve(null);\n    }, timeout);\n  });\n","import { BaseDriver } from './BaseDriver';\n\nexport class ButtonDriver extends BaseDriver {\n  nodeName = 'descope-button';\n\n  onClick(cb: (e: Event) => void) {\n    this.ele?.addEventListener('click', cb);\n\n    return () => this.ele?.removeEventListener('click', cb);\n  }\n\n  disable() {\n    this.ele?.setAttribute('disabled', 'true');\n  }\n\n  enable() {\n    this.ele?.removeAttribute('disabled');\n  }\n}\n","import { compareArrays } from '@descope/sdk-helpers';\nimport { BaseDriver } from '../BaseDriver';\nimport { GridCustomColumnDriver } from './GridCustomColumnDriver';\nimport { GridTextColumnDriver } from './GridTextColumnDriver';\n\ntype Column = {\n  path: string;\n  header: string;\n  type: string;\n  attrs: Record<string, string>;\n};\n\nconst columnRegex = /^descope-grid-([^-]+)-column$/;\n\nconst driversMapping = {\n  text: GridTextColumnDriver,\n  custom: GridCustomColumnDriver,\n};\n\nexport class GridDriver<T extends any> extends BaseDriver {\n  nodeName = 'descope-grid';\n  #onColumnsChangeCb: (columns: Column[]) => void;\n\n  onSelectedItemsChange(cb: (e: CustomEvent<{ value: T[] }>) => void) {\n    this.ele?.addEventListener('selected-items-changed', cb);\n\n    return () => this.ele?.removeEventListener('selected-items-changed', cb);\n  }\n\n  get ele() {\n    return super.ele as Element & {\n      data: T[];\n      columns: Column[];\n      renderColumn: ({ path, header, type, attrs }: Column) => string;\n    };\n  }\n\n  get data() {\n    return this.ele?.data;\n  }\n\n  set data(data: T[]) {\n    if (this.ele) this.ele.data = data;\n  }\n\n  get columns() {\n    if (!this.ele) return [];\n    return Array.from(this.ele.children).reduce((acc, child) => {\n      const columnType = columnRegex.exec(child.localName)?.[1];\n      const Driver = driversMapping[columnType];\n\n      if (!Driver) return acc;\n\n      acc.push(new Driver(child, { logger: this.logger }));\n\n      return acc;\n    }, []);\n  }\n\n  filterColumns(filterFn: (col: Column) => boolean) {\n    const filteredColumns = this.ele.columns?.filter(filterFn);\n    if (!filteredColumns || !this.ele.columns) return;\n    if (!compareArrays(filteredColumns, this.ele.columns)) {\n      this.ele.columns = filteredColumns;\n      this.#onColumnsChangeCb?.(filteredColumns);\n    }\n  }\n\n  onColumnsChange(cb: (columns: Column[]) => void) {\n    this.#onColumnsChangeCb = cb;\n  }\n\n  set renderColumn(\n    renderFn: ({ path, header, type, attrs }: Column) => string,\n  ) {\n    this.ele.renderColumn = renderFn;\n  }\n}\n","import { BaseDriver } from '../BaseDriver';\n\nexport class GridTextColumnDriver extends BaseDriver {\n  nodeName = 'descope-grid-text-column';\n\n  onSortDirectionChange(\n    cb: (e: CustomEvent<{ value: 'asc' | 'desc' | null }>) => void,\n  ) {\n    this.ele?.addEventListener('direction-changed', cb);\n\n    return () => this.ele?.removeEventListener('selected-items-changed', cb);\n  }\n}\n","import { BaseDriver } from '../BaseDriver';\n\nexport class GridCustomColumnDriver extends BaseDriver {\n  nodeName = 'descope-grid-custom-column';\n\n  onSortDirectionChange(\n    cb: (e: CustomEvent<{ value: 'asc' | 'desc' | null }>) => void,\n  ) {\n    this.ele?.addEventListener('direction-changed', cb);\n\n    return () => this.ele?.removeEventListener('selected-items-changed', cb);\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\ntype Data = { name: string; icon: string; url: string }[];\n\nexport class AppsListDriver extends BaseDriver {\n  nodeName = 'descope-apps-list';\n\n  set data(data: Data) {\n    if (this.ele) this.ele.data = data;\n  }\n\n  get data() {\n    return this.ele?.data;\n  }\n\n  get ele() {\n    return super.ele as Element & {\n      data: Data;\n    };\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\nexport class AvatarDriver extends BaseDriver {\n  nodeName = 'descope-avatar';\n\n  set displayName(name: string) {\n    this.ele?.setAttribute('display-name', name);\n  }\n\n  set image(imgUrl: string) {\n    this.ele?.setAttribute('img', imgUrl);\n  }\n\n  get flowId() {\n    return this.ele?.getAttribute('flow-id');\n  }\n\n  onClick(cb: (e: Event) => void) {\n    this.ele?.addEventListener('click', cb);\n\n    return () => this.ele?.removeEventListener('click', cb);\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\nexport class FlowDriver extends BaseDriver {\n  nodeName = 'descope-wc';\n\n  set projectId(projectId: string) {\n    this.ele?.setAttribute('project-id', projectId);\n  }\n\n  set baseUrl(baseUrl: string) {\n    this.ele?.setAttribute('base-url', baseUrl);\n  }\n\n  set flowId(flowId: string) {\n    this.ele?.setAttribute('flow-id', flowId);\n  }\n\n  set theme(theme: string | null | undefined) {\n    if (!theme) {\n      this.ele?.removeAttribute('theme');\n    } else {\n      this.ele?.setAttribute('theme', theme);\n    }\n  }\n\n  onSuccess(cb: () => void) {\n    this.ele?.addEventListener('success', cb);\n\n    return () => this.ele?.removeEventListener('success', cb);\n  }\n  onPageUpdated(cb: () => void) {\n    this.ele?.addEventListener('page-updated', cb);\n\n    return () => this.ele?.removeEventListener('page-updated', cb);\n  }\n}\n","import { ButtonDriver } from './ButtonDriver';\n\nexport class GenericFlowButtonDriver extends ButtonDriver {\n  get flowId(): string {\n    return this.ele?.getAttribute('flow-id') || '';\n  }\n  get enableMode(): 'onlyOne' | 'oneOrMore' | 'always' {\n    return this.ele?.getAttribute('enable-mode') as\n      | 'onlyOne'\n      | 'oneOrMore'\n      | 'always';\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\nexport class LinkDriver extends BaseDriver {\n  nodeName = 'descope-link';\n\n  get ele() {\n    return super.ele as Element & {\n      innerText: string;\n      getAttribute: (name: string) => string | null;\n    };\n  }\n\n  get href() {\n    return this.ele?.getAttribute('href');\n  }\n\n  set href(href: string) {\n    this.ele?.setAttribute('href', href ?? '');\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\nexport class ModalDriver extends BaseDriver {\n  #modalContent: HTMLTemplateElement;\n\n  beforeOpen: undefined | (() => void | Promise<void>);\n\n  afterClose: undefined | (() => void);\n\n  nodeName = 'descope-modal';\n\n  close() {\n    this.ele?.removeAttribute('opened');\n    this.afterClose?.();\n  }\n\n  async open() {\n    await this.beforeOpen?.();\n    this.ele?.setAttribute('opened', 'true');\n  }\n\n  reset() {\n    if (this.ele) this.ele.innerHTML = '';\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n    this.#modalContent &&\n      this.ele?.append(this.#modalContent.content.cloneNode(true));\n  }\n\n  setContent(template: HTMLTemplateElement) {\n    this.#modalContent = template;\n    this.reset();\n  }\n\n  remove() {\n    this.ele?.remove();\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\nexport class MultiSelectDriver extends BaseDriver {\n  nodeName = 'descope-multi-select-combo-box';\n\n  async setData(data: { label: string; value: string }[]) {\n    (await this.asyncEle)?.setAttribute('data', JSON.stringify(data.sort()));\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\nexport class NotificationDriver extends BaseDriver {\n  nodeName = 'descope-notification';\n\n  close() {\n    this.ele?.removeAttribute('opened');\n  }\n\n  show() {\n    this.ele?.setAttribute('opened', 'true');\n  }\n\n  setContent(template: HTMLTemplateElement) {\n    this.ele.innerHTML = '';\n    this.ele.appendChild(template.content.cloneNode(true));\n  }\n\n  remove() {\n    this.ele?.remove();\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\ntype Data = {\n  id: string;\n  name: string;\n  description?: string;\n  logo?: string;\n  isConnected?: boolean;\n}[];\n\ntype Detail = { id: string; action: string };\n\nexport class OutboundAppsListDriver extends BaseDriver {\n  nodeName = 'descope-outbound-apps';\n\n  set data(data: Data) {\n    if (this.ele) this.ele.data = data;\n  }\n\n  get data() {\n    return this.ele?.data;\n  }\n\n  get ele() {\n    return super.ele as Element & {\n      data: Data;\n    };\n  }\n\n  get connectFlowId() {\n    return this.ele?.getAttribute('connect-flow-id') || '';\n  }\n\n  get disconnectFlowId() {\n    return this.ele?.getAttribute('disconnect-flow-id') || '';\n  }\n\n  onConnectClick(cb: (detail: Detail) => void) {\n    const handler = (e: CustomEvent<Detail>) => cb(e.detail);\n    this.ele?.addEventListener('connect-clicked', handler);\n\n    return () => this.ele?.removeEventListener('connect-clicked', handler);\n  }\n\n  onDisconnectClick(cb: (detail: Detail) => void) {\n    const handler = (e: CustomEvent<Detail>) => cb(e.detail);\n    this.ele?.addEventListener('disconnect-clicked', handler);\n\n    return () => this.ele?.removeEventListener('disconnect-clicked', handler);\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\nexport class SingleSelectDriver extends BaseDriver {\n  nodeName = 'descope-combo-box';\n\n  onInput(cb: (e: InputEvent) => void) {\n    this.ele?.addEventListener('input', cb);\n\n    return () => this.ele?.removeEventListener('input', cb);\n  }\n\n  get value() {\n    return (<HTMLInputElement>this.ele)?.value;\n  }\n\n  set value(value: string) {\n    if (this.ele) {\n      (<HTMLInputElement>this.ele).value = value;\n    }\n  }\n\n  async setData(data: { label: string; value: string }[]) {\n    (await this.asyncEle)?.setAttribute('data', JSON.stringify(data.sort()));\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\nexport class TextDriver extends BaseDriver {\n  nodeName = 'descope-text';\n\n  get ele() {\n    return super.ele as Element & { innerText: string };\n  }\n\n  get text() {\n    return this.ele?.innerText;\n  }\n\n  set text(content: string) {\n    if (this.ele) this.ele.innerText = content;\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\nexport class TextFieldDriver extends BaseDriver {\n  nodeName = 'descope-text-field';\n\n  onInput(cb: (e: InputEvent) => void) {\n    this.ele?.addEventListener('input', cb);\n\n    return () => this.ele?.removeEventListener('input', cb);\n  }\n\n  get value() {\n    return (<HTMLInputElement>this.ele)?.value;\n  }\n\n  set value(value: string) {\n    if (this.ele) {\n      (<HTMLInputElement>this.ele).value = value;\n    }\n  }\n\n  disable() {\n    this.ele?.setAttribute('disabled', 'true');\n  }\n\n  enable() {\n    this.ele?.removeAttribute('disabled');\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\nexport class UserAttributeDriver extends BaseDriver {\n  nodeName = 'descope-user-attribute';\n\n  set value(value: string) {\n    this.ele?.setAttribute('value', value);\n  }\n\n  set badgeLabel(label: string) {\n    this.ele?.setAttribute('badge-label', label);\n  }\n\n  get label() {\n    return this.ele?.getAttribute('label') || '';\n  }\n\n  get editFlowId() {\n    return this.ele?.getAttribute('edit-flow-id') || '';\n  }\n\n  get deleteFlowId() {\n    return this.ele?.getAttribute('delete-flow-id') || '';\n  }\n\n  onEditClick(cb: (e: Event) => void) {\n    this.ele?.addEventListener('edit-clicked', cb);\n\n    return () => this.ele?.removeEventListener('edit-clicked', cb);\n  }\n\n  onDeleteClick(cb: (e: Event) => void) {\n    this.ele?.addEventListener('delete-clicked', cb);\n\n    return () => this.ele?.removeEventListener('delete-clicked', cb);\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\nexport class UserAuthMethodDriver extends BaseDriver {\n  nodeName = 'descope-user-auth-method';\n\n  set fulfilled(isFulfilled: boolean) {\n    isFulfilled\n      ? this.ele?.setAttribute('fulfilled', 'true')\n      : this.ele?.removeAttribute('fulfilled');\n  }\n\n  onUnfulfilledButtonClick(cb: (e: Event) => void) {\n    this.ele?.addEventListener('button-clicked', cb);\n\n    return () => this.ele?.removeEventListener('button-clicked', cb);\n  }\n\n  onFulfilledButtonClick(cb: (e: Event) => void) {\n    this.ele?.addEventListener('fulfilled-button-clicked', cb);\n\n    return () => this.ele?.removeEventListener('fulfilled-button-clicked', cb);\n  }\n\n  get flowId() {\n    return this.ele?.getAttribute('flow-id');\n  }\n\n  get fulfilledFlowId() {\n    return this.ele?.getAttribute('fulfilled-flow-id');\n  }\n}\n"],"names":["BaseDriver","constructor","refOrRefFn","config","_BaseDriver_ele","set","this","nodeName","__classPrivateFieldSet","logger","asyncEle","async","ele","timeout","Promise","resolve","interval","setInterval","element","clearInterval","setTimeout","waitForElement","__classPrivateFieldGet","call","localName","_b","debug","Error","_a","ButtonDriver","onClick","cb","addEventListener","removeEventListener","disable","setAttribute","enable","removeAttribute","columnRegex","driversMapping","text","onSortDirectionChange","custom","data","super","displayName","name","image","imgUrl","flowId","getAttribute","projectId","baseUrl","theme","onSuccess","onPageUpdated","enableMode","_GridDriver_onColumnsChangeCb","onSelectedItemsChange","columns","Array","from","children","reduce","acc","child","columnType","exec","Driver","push","filterColumns","filterFn","filteredColumns","filter","compareArrays","onColumnsChange","renderColumn","renderFn","href","_ModalDriver_modalContent","close","afterClose","open","beforeOpen","reset","innerHTML","append","content","cloneNode","setContent","template","remove","setData","JSON","stringify","sort","show","appendChild","connectFlowId","disconnectFlowId","onConnectClick","handler","e","detail","onDisconnectClick","onInput","value","innerText","badgeLabel","label","editFlowId","deleteFlowId","onEditClick","onDeleteClick","fulfilled","isFulfilled","onUnfulfilledButtonClick","onFulfilledButtonClick","fulfilledFlowId"],"mappings":"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"}