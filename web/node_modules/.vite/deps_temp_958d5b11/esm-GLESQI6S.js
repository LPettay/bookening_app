import {
  L,
  b,
  cookieConfigMixin,
  createAsyncThunk,
  createSelector,
  createStateManagementMixin,
  d,
  debuggerMixin,
  formMixin,
  h as h2,
  modalMixin,
  notificationsMixin,
  x
} from "./chunk-XU36NMJB.js";
import {
  baseUrlMixin,
  createValidateAttributesMixin,
  descopeUiMixin,
  initElementMixin,
  projectIdMixin,
  staticResourcesMixin,
  themeMixin
} from "./chunk-JGGIE4AD.js";
import {
  Ie
} from "./chunk-5SHIU7TC.js";
import {
  initLifecycleMixin,
  loggerMixin,
  observeAttributesMixin
} from "./chunk-PGJ4DCSZ.js";
import {
  __awaiter,
  __classPrivateFieldGet,
  __classPrivateFieldSet,
  __rest,
  f,
  h,
  l,
  n,
  o,
  r
} from "./chunk-C4K4ZQL2.js";
import "./chunk-KEXKKQVW.js";

// node_modules/@descope/role-management-widget/dist/esm/index.js
var F = (e) => e.selectedRolesIds;
var $ = (e) => e.notifications;
var q = (e) => e.tenantPermissions.data || [];
var B = createSelector((e) => e.rolesList.data, (e) => e.map((e2) => {
  var t;
  return Object.assign(Object.assign({}, e2), { editable: 0 === (null === (t = null == e2 ? void 0 : e2.tenantId) || void 0 === t ? void 0 : t.length) ? "no" : "yes" });
}));
var D = createSelector(F, B, (e, t) => t.filter((t2) => e.includes(t2.name)));
var T = createSelector(F, (e) => !!e.length);
var E = createSelector(F, (e) => 1 === e.length);
var A = createSelector(D, E, (e, t) => t && "yes" === e[0].editable);
var H = createSelector(D, (e) => 1 === e.length ? e[0].name : `${e.length} roles`);
var Z = (e) => (...t) => (i) => {
  i.addCase(e.pending, (e2, i2) => {
    t.forEach(({ onPending: t2 }) => {
      null == t2 || t2(e2, i2);
    });
  }), i.addCase(e.fulfilled, (e2, i2) => {
    t.forEach(({ onFulfilled: t2 }) => {
      null == t2 || t2(e2, i2);
    });
  }), i.addCase(e.rejected, (e2, i2) => {
    t.forEach(({ onRejected: t2 }) => {
      null == t2 || t2(e2, i2);
    });
  });
};
var V = (e) => ({ onFulfilled: (t) => {
  e(t).loading = false;
}, onPending: (t) => {
  e(t).loading = true, e(t).error = null;
}, onRejected: (t, i) => {
  e(t).loading = false, e(t).error = i.error;
} });
var U = ({ getErrorMsg: e, getSuccessMsg: t }) => ({ onFulfilled: (e2, i) => {
  t && e2.notifications.push({ type: "success", msg: t(i) });
}, onRejected: (t2, i) => {
  e && t2.notifications.push({ type: "error", msg: e(i) });
} });
var z = createAsyncThunk("roles/create", (e, { extra: { api: t } }) => t.role.create(e));
var J = Z(z)({ onFulfilled: (e, t) => {
  e.rolesList.data.unshift(t.payload);
} }, V((e) => e.createRole), U({ getSuccessMsg: () => "Role created successfully", getErrorMsg: (e) => {
  var t;
  return `
      <div>
        <div>Failed to create role</div>
        ${null === (t = e.error) || void 0 === t ? void 0 : t.message}
      </div>`;
} }));
var G = { action: z, reducer: J };
var K = createAsyncThunk("roles/delete", (e, { extra: { api: t } }) => t.role.deleteBatch(e));
var Q = Z(K)({ onFulfilled: (e, t) => {
  e.rolesList.data = e.rolesList.data.filter((e2) => {
    var i;
    return 0 === (null === (i = null == e2 ? void 0 : e2.tenantId) || void 0 === i ? void 0 : i.length) || !t.meta.arg.includes(e2.name);
  }), e.selectedRolesIds = [];
} }, V((e) => e.deleteRole), U({ getSuccessMsg: (t) => f(t.meta.arg.length)`${["", t.meta.arg.length]} ${["R", "r"]}ole${["", "s"]} deleted successfully`, getErrorMsg: (t) => f(t.meta.arg.length)`Failed to delete role${["", "s"]}` }));
var X = { action: K, reducer: Q };
var Y = createAsyncThunk("roles/search", (e, { extra: { api: t }, getState: i }) => {
  const o2 = i().searchParams;
  return t.role.search(Object.assign(Object.assign({}, o2), e));
});
var _ = Z(Y)({ onPending: (e, t) => {
  e.searchParams = Object.assign(Object.assign({}, e.searchParams), t.meta.arg);
}, onFulfilled: (e, t) => {
  e.rolesList.data = t.payload;
} }, V((e) => e.rolesList));
var ee = { action: Y, reducer: _ };
var te = createAsyncThunk("roles/update", (e, { extra: { api: t } }) => t.role.update(e));
var ie = Z(te)({ onFulfilled: (e, t) => {
  const i = e.rolesList.data.findIndex((e2) => e2.name === t.payload.oldName);
  -1 !== i && (e.rolesList.data[i] = t.payload);
} }, V((e) => e.updateRole), U({ getSuccessMsg: () => "Role updated successfully", getErrorMsg: (e) => {
  var t;
  return `
      <div>
        <div>Failed to update role</div>
        ${null === (t = e.error) || void 0 === t ? void 0 : t.message}
      </div>`;
} }));
var oe = { action: te, reducer: ie };
var se = createAsyncThunk("tenant/getTenantPermissions", (e, { extra: { api: t } }) => t.tenant.getTenantPermissions());
var ne = { action: se, reducer: Z(se)({ onFulfilled: (e, t) => {
  e.tenantPermissions.data = t.payload.permissions;
} }, V((e) => e.tenantPermissions)) };
var ae = { rolesList: { data: [], loading: false, error: null }, createRole: { loading: false, error: null }, updateRole: { loading: false, error: null }, deleteRole: { loading: false, error: null }, tenantPermissions: { loading: false, error: null, data: [] }, searchParams: { text: "", sort: [] }, selectedRolesIds: [], notifications: [] };
var re = { search: "/v1/mgmt/role/search", deleteBatch: "/v1/mgmt/role/delete/batch", create: "/v1/mgmt/role/create", update: "/v1/mgmt/role/update" };
var le = { permissions: "/v1/mgmt/permission/all" };
var de = (e) => __awaiter(void 0, void 0, void 0, function* () {
  const t = yield e.text(), i = JSON.parse(t);
  if (!e.ok) {
    const t2 = `${i.errorDescription}${i.errorMessage ? `: ${i.errorMessage}` : ""}`;
    throw Error(t2 || `${e.status} ${e.statusText}`);
  }
  e.json = () => Promise.resolve(i), e.text = () => Promise.resolve(t);
});
var ce = (e, t) => __awaiter(void 0, [e, t], void 0, function* ({ text: e2, sort: t2 }, i) {
  return new Promise((o2) => {
    const s = [];
    for (let e3 = 1; e3 < 10; e3 += 1) s.push({ name: `Role ${e3}`, description: `Role description ${e3}`, permissionNames: [`Permission ${e3}`], createdTime: /* @__PURE__ */ new Date(), tenantId: i });
    t2.forEach((e3) => {
      s.sort((t3, i2) => {
        var o3, s2;
        return e3.desc ? null === (s2 = i2[e3.field]) || void 0 === s2 ? void 0 : s2.localeCompare(t3[e3.field]) : null === (o3 = t3[e3.field]) || void 0 === o3 ? void 0 : o3.localeCompare(i2[e3.field]);
      });
    }), o2(s.filter((t3) => t3.name.toLowerCase().includes(e2.toLowerCase()) || t3.description.toLowerCase().includes(e2.toLowerCase())));
  });
});
var ue = (e, t) => __awaiter(void 0, [e, t], void 0, function* ({ name: e2, description: t2, permissionNames: i }, o2) {
  return new Promise((s) => {
    s({ name: e2, description: t2, permissionNames: i, createdTime: /* @__PURE__ */ new Date(), tenantId: o2 });
  });
});
var he = (e, t) => __awaiter(void 0, [e, t], void 0, function* ({ name: e2, newName: t2, description: i, permissionNames: o2 }, s) {
  return new Promise((n2) => {
    n2({ name: t2, description: i, permissionNames: o2, createdTime: /* @__PURE__ */ new Date(), oldName: e2, tenantId: s });
  });
});
var ge = () => __awaiter(void 0, void 0, void 0, function* () {
});
var ve = () => new Promise((e) => {
  const t = [];
  for (let e2 = 1; e2 < 5; e2 += 1) t.push({ name: `Permission ${e2}` });
  e({ permissions: t });
});
var me = ({ httpClient: e, tenant: t, mock: i }) => ({ search: (...o2) => __awaiter(void 0, [...o2], void 0, function* ({ page: o3, limit: s = 1e4, text: n2, sort: a } = {}) {
  if (i) return ce({ page: o3, limit: s, text: n2, sort: a }, t);
  const r2 = yield e.post(re.search, { limit: s, page: o3, text: n2, sort: a }, { queryParams: { tenant: t } });
  yield de(r2);
  return (yield r2.json()).roles;
}), deleteBatch: (o2) => __awaiter(void 0, void 0, void 0, function* () {
  if (i) return ge();
  const s = yield e.post(re.deleteBatch, { roleNames: o2 }, { queryParams: { tenant: t } });
  return yield de(s), s.json();
}), create: (o2) => __awaiter(void 0, [o2], void 0, function* ({ name: o3, description: s, permissionNames: n2 }) {
  if (i) return ue({ name: o3, description: s, permissionNames: n2 }, t);
  const a = yield e.post(re.create, { name: o3, description: s, permissionNames: n2, tenantId: t }, { queryParams: { tenant: t } });
  yield de(a);
  return yield a.json();
}), update: (o2) => __awaiter(void 0, [o2], void 0, function* ({ name: o3, newName: s, description: n2, permissionNames: a }) {
  if (i) return he({ name: o3, newName: s, description: n2, permissionNames: a }, t);
  const r2 = yield e.post(re.update, { name: o3, newName: s, description: n2, permissionNames: a, tenantId: t }, { queryParams: { tenant: t } });
  yield de(r2);
  const l2 = yield r2.json();
  return l2.oldName = o3, l2;
}) });
var pe = ({ httpClient: e, tenant: t, mock: i }) => ({ getTenantPermissions: () => __awaiter(void 0, void 0, void 0, function* () {
  if (i) return ve();
  const o2 = yield e.get(le.permissions, { queryParams: { tenant: t } });
  return yield de(o2), o2.json();
}) });
var Re = h((e) => {
  var t, o2, s, n2;
  const d2 = r(projectIdMixin, observeAttributesMixin, loggerMixin, baseUrlMixin, cookieConfigMixin, createValidateAttributesMixin({ tenant: createValidateAttributesMixin.missingAttrValidator }))(e);
  return n2 = class extends d2 {
    constructor() {
      super(...arguments), t.add(this), o2.set(this, void 0);
    }
    get tenantId() {
      return this.getAttribute("tenant");
    }
    get widgetId() {
      return this.getAttribute("widget-id");
    }
    get mock() {
      return this.getAttribute("mock");
    }
    get api() {
      return __classPrivateFieldGet(this, o2, "f") || __classPrivateFieldGet(this, t, "m", s).call(this), __classPrivateFieldGet(this, o2, "f");
    }
    init() {
      const e2 = Object.create(null, { init: { get: () => super.init } });
      return __awaiter(this, void 0, void 0, function* () {
        var i;
        yield null === (i = e2.init) || void 0 === i ? void 0 : i.call(this), this.observeAttributes(["project-id", "base-url", "tenant"], () => {
          __classPrivateFieldGet(this, o2, "f") && __classPrivateFieldGet(this, t, "m", s).call(this);
        });
      });
    }
  }, o2 = /* @__PURE__ */ new WeakMap(), t = /* @__PURE__ */ new WeakSet(), s = function() {
    this.logger.debug("creating an sdk instance"), __classPrivateFieldSet(this, o2, ((e2, t2, i, o3) => {
      const s2 = Ie(Object.assign(Object.assign({}, e2), { persistTokens: true, baseHeaders: { "x-descope-widget-type": "role-management-widget", "x-descope-widget-id": o3, "x-descope-widget-version": "0.5.1" } }));
      return { role: me({ httpClient: s2.httpClient, tenant: t2, mock: i }), tenant: pe({ httpClient: s2.httpClient, tenant: t2, mock: i }) };
    })({ projectId: this.projectId, baseUrl: this.baseUrl, refreshCookieName: this.refreshCookieName }, this.tenantId, "true" === this.mock, this.widgetId), "f");
  }, n2;
});
var fe = h((e) => {
  const t = r(createStateManagementMixin({ name: "widget", initialState: ae, reducers: { setSelectedRolesIds: (e2, { payload: t2 }) => {
    e2.selectedRolesIds = t2;
  }, clearNotifications: (e2) => {
    e2.notifications = [];
  } }, extraReducers: (e2) => {
    G.reducer(e2), oe.reducer(e2), X.reducer(e2), ee.reducer(e2), ne.reducer(e2);
  }, asyncActions: { searchRoles: ee.action, createRole: G.action, updateRole: oe.action, deleteRoles: X.action, getTenantPermissions: ne.action } }), initLifecycleMixin, loggerMixin, Re)(e);
  return class extends t {
    constructor(...e2) {
      super(...e2), this.state = ae, this.subscribe((e3) => {
        this.logger.debug("State update:", e3), this.state = e3;
      });
    }
  };
});
var ye = h((e) => {
  const t = r(staticResourcesMixin, createValidateAttributesMixin({ "widget-id": createValidateAttributesMixin.missingAttrValidator }))(e);
  return class extends t {
    get widgetId() {
      return this.getAttribute("widget-id");
    }
    fetchWidgetPage(e2) {
      return __awaiter(this, void 0, void 0, function* () {
        return (yield this.fetchStaticResource(`role-management-widget/${this.widgetId}/${e2}`, "text")).body;
      });
    }
  };
});
var we = h((e) => {
  var t, s, n2;
  return n2 = class extends r(loggerMixin, initLifecycleMixin, descopeUiMixin, initElementMixin, ye, fe)(e) {
    constructor() {
      super(...arguments), t.add(this);
    }
    onWidgetRootReady() {
      return __awaiter(this, void 0, void 0, function* () {
      });
    }
    init() {
      const e2 = Object.create(null, { init: { get: () => super.init } });
      return __awaiter(this, void 0, void 0, function* () {
        var i;
        yield null === (i = e2.init) || void 0 === i ? void 0 : i.call(this), yield Promise.all([__classPrivateFieldGet(this, t, "m", s).call(this), this.actions.searchRoles(), this.actions.getTenantPermissions()]), this.onWidgetRootReady();
      });
    }
  }, t = /* @__PURE__ */ new WeakSet(), s = function() {
    return __awaiter(this, void 0, void 0, function* () {
      const e2 = n(yield this.fetchWidgetPage("root.html"));
      yield this.loadDescopeUiComponents(e2), this.contentRootElement.append(e2.content.cloneNode(true));
    });
  }, n2;
});
var be = h((e) => {
  var t, s, n2, d2, c;
  return c = class extends r(fe, modalMixin, formMixin, loggerMixin, we)(e) {
    constructor() {
      super(...arguments), t.add(this), s.set(this, void 0), d2.set(this, () => __awaiter(this, void 0, void 0, function* () {
        var e2;
        yield __classPrivateFieldGet(this, s, "f").setData(null === (e2 = q(this.state)) || void 0 === e2 ? void 0 : e2.map(({ name: e3 }) => ({ value: e3, label: e3 })));
      }));
    }
    onWidgetRootReady() {
      const e2 = Object.create(null, { onWidgetRootReady: { get: () => super.onWidgetRootReady } });
      return __awaiter(this, void 0, void 0, function* () {
        var i;
        yield null === (i = e2.onWidgetRootReady) || void 0 === i ? void 0 : i.call(this), __classPrivateFieldGet(this, t, "m", n2).call(this);
      });
    }
  }, s = /* @__PURE__ */ new WeakMap(), d2 = /* @__PURE__ */ new WeakMap(), t = /* @__PURE__ */ new WeakSet(), n2 = function() {
    return __awaiter(this, void 0, void 0, function* () {
      this.createRoleModal = this.createModal(), this.createRoleModal.setContent(n(yield this.fetchWidgetPage("create-role-modal.html")));
      new d(() => {
        var e2;
        return null === (e2 = this.createRoleModal.ele) || void 0 === e2 ? void 0 : e2.querySelector('[data-id="modal-cancel"]');
      }, { logger: this.logger }).onClick(() => {
        this.createRoleModal.close(), this.resetFormData(this.createRoleModal.ele);
      });
      new d(() => {
        var e2;
        return null === (e2 = this.createRoleModal.ele) || void 0 === e2 ? void 0 : e2.querySelector('[data-id="modal-submit"]');
      }, { logger: this.logger }).onClick(() => __awaiter(this, void 0, void 0, function* () {
        this.validateForm(this.createRoleModal.ele) && (this.actions.createRole(Object.assign({}, this.getFormData(this.createRoleModal.ele))), this.createRoleModal.close(), this.resetFormData(this.createRoleModal.ele));
      })), __classPrivateFieldSet(this, s, new b(() => {
        var e2;
        return null === (e2 = this.createRoleModal.ele) || void 0 === e2 ? void 0 : e2.querySelector('[data-id="permissions-multiselect"]');
      }, { logger: this.logger }), "f"), __classPrivateFieldGet(this, d2, "f").call(this);
    });
  }, c;
});
var Me = h((e) => {
  var t, o2, s;
  return s = class extends r(loggerMixin, be, we)(e) {
    constructor() {
      super(...arguments), t.add(this);
    }
    onWidgetRootReady() {
      const e2 = Object.create(null, { onWidgetRootReady: { get: () => super.onWidgetRootReady } });
      return __awaiter(this, void 0, void 0, function* () {
        var i;
        yield null === (i = e2.onWidgetRootReady) || void 0 === i ? void 0 : i.call(this), __classPrivateFieldGet(this, t, "m", o2).call(this);
      });
    }
  }, t = /* @__PURE__ */ new WeakSet(), o2 = function() {
    var e2;
    this.createButton = new d(null === (e2 = this.shadowRoot) || void 0 === e2 ? void 0 : e2.querySelector('[data-id="create-role"]'), { logger: this.logger }), this.createButton.onClick(() => this.createRoleModal.open());
  }, s;
});
var Ce = h((e) => {
  var t, s, n2;
  return n2 = class extends r(fe, modalMixin, loggerMixin, we)(e) {
    constructor() {
      super(...arguments), t.add(this);
    }
    onWidgetRootReady() {
      const e2 = Object.create(null, { onWidgetRootReady: { get: () => super.onWidgetRootReady } });
      return __awaiter(this, void 0, void 0, function* () {
        var i;
        yield null === (i = e2.onWidgetRootReady) || void 0 === i ? void 0 : i.call(this), yield __classPrivateFieldGet(this, t, "m", s).call(this);
      });
    }
  }, t = /* @__PURE__ */ new WeakSet(), s = function() {
    return __awaiter(this, void 0, void 0, function* () {
      var e2;
      this.deleteRolesModal = this.createModal(), this.deleteRolesModal.setContent(n(yield this.fetchWidgetPage("delete-roles-modal.html")));
      const t2 = new d(() => {
        var e3;
        return null === (e3 = this.deleteRolesModal.ele) || void 0 === e3 ? void 0 : e3.querySelector('[data-id="modal-cancel"]');
      }, { logger: this.logger });
      t2.onClick(() => this.deleteRolesModal.close());
      const i = new d(() => {
        var e3;
        return null === (e3 = this.deleteRolesModal.ele) || void 0 === e3 ? void 0 : e3.querySelector('[data-id="modal-submit"]');
      }, { logger: this.logger });
      i.onClick(() => {
        const e3 = D(this.state);
        this.actions.deleteRoles(null == e3 ? void 0 : e3.map((e4) => e4.name)), this.deleteRolesModal.close();
      });
      const s2 = new L(null === (e2 = this.deleteRolesModal.ele) || void 0 === e2 ? void 0 : e2.querySelector('[data-id="body-text"]'), { logger: this.logger });
      this.deleteRolesModal.beforeOpen = () => {
        const e3 = H(this.state);
        s2.text = `Delete ${e3}?`;
      };
    });
  }, n2;
});
var We = h((e) => {
  var t, o2, n2, l2;
  return l2 = class extends r(loggerMixin, we, fe, Ce)(e) {
    constructor() {
      super(...arguments), t.add(this), n2.set(this, o((e2) => {
        e2 ? this.deleteButton.enable() : this.deleteButton.disable();
      }));
    }
    onWidgetRootReady() {
      const e2 = Object.create(null, { onWidgetRootReady: { get: () => super.onWidgetRootReady } });
      return __awaiter(this, void 0, void 0, function* () {
        var i;
        yield null === (i = e2.onWidgetRootReady) || void 0 === i ? void 0 : i.call(this), __classPrivateFieldGet(this, t, "m", o2).call(this), this.subscribe(__classPrivateFieldGet(this, n2, "f").bind(this), T);
      });
    }
  }, n2 = /* @__PURE__ */ new WeakMap(), t = /* @__PURE__ */ new WeakSet(), o2 = function() {
    var e2;
    this.deleteButton = new d(null === (e2 = this.shadowRoot) || void 0 === e2 ? void 0 : e2.querySelector('[data-id="delete-roles"]'), { logger: this.logger }), this.deleteButton.disable(), this.deleteButton.onClick(() => {
      this.deleteRolesModal.open();
    });
  }, l2;
});
var ke = h((e) => {
  var t, s, n2, c, u, g, v, m;
  return m = class extends r(fe, modalMixin, loggerMixin, formMixin, we)(e) {
    constructor() {
      super(...arguments), t.add(this), s.set(this, void 0), u.set(this, () => __awaiter(this, void 0, void 0, function* () {
        var e2;
        yield __classPrivateFieldGet(this, s, "f").setData(null === (e2 = q(this.state)) || void 0 === e2 ? void 0 : e2.map(({ name: e3 }) => ({ value: e3, label: e3 })));
      })), g.set(this, () => {
        var e2;
        const t2 = null === (e2 = D(this.state)) || void 0 === e2 ? void 0 : e2[0], i = { name: null == t2 ? void 0 : t2.name, description: null == t2 ? void 0 : t2.description, permissionNames: null == t2 ? void 0 : t2.permissionNames };
        this.setFormData(this.editRoleModal.ele, i);
      });
    }
    onWidgetRootReady() {
      const e2 = Object.create(null, { onWidgetRootReady: { get: () => super.onWidgetRootReady } });
      return __awaiter(this, void 0, void 0, function* () {
        var i;
        yield null === (i = e2.onWidgetRootReady) || void 0 === i ? void 0 : i.call(this), yield __classPrivateFieldGet(this, t, "m", v).call(this);
      });
    }
  }, s = /* @__PURE__ */ new WeakMap(), u = /* @__PURE__ */ new WeakMap(), g = /* @__PURE__ */ new WeakMap(), t = /* @__PURE__ */ new WeakSet(), n2 = function() {
    new d(() => {
      var e2;
      return null === (e2 = this.editRoleModal.ele) || void 0 === e2 ? void 0 : e2.querySelector('[data-id="modal-cancel"]');
    }, { logger: this.logger }).onClick(() => this.editRoleModal.close());
  }, c = function() {
    new d(() => {
      var e2;
      return null === (e2 = this.editRoleModal.ele) || void 0 === e2 ? void 0 : e2.querySelector('[data-id="modal-submit"]');
    }, { logger: this.logger }).onClick(() => {
      var e2;
      if (this.validateForm(this.editRoleModal.ele)) {
        const t2 = this.getFormData(this.editRoleModal.ele), { name: i } = t2, o2 = __rest(t2, ["name"]), s2 = null === (e2 = D(this.state)) || void 0 === e2 ? void 0 : e2[0];
        this.actions.updateRole(Object.assign({ newName: i, name: s2.name }, o2)), this.editRoleModal.close(), this.resetFormData(this.editRoleModal.ele);
      }
    });
  }, v = function() {
    return __awaiter(this, void 0, void 0, function* () {
      this.editRoleModal = this.createModal(), this.editRoleModal.setContent(n(yield this.fetchWidgetPage("edit-role-modal.html"))), __classPrivateFieldGet(this, t, "m", n2).call(this), __classPrivateFieldGet(this, t, "m", c).call(this), __classPrivateFieldSet(this, s, new b(() => {
        var e2;
        return null === (e2 = this.editRoleModal.ele) || void 0 === e2 ? void 0 : e2.querySelector('[data-id="permissions-multiselect"]');
      }, { logger: this.logger }), "f"), this.editRoleModal.beforeOpen = () => __awaiter(this, void 0, void 0, function* () {
        yield __classPrivateFieldGet(this, u, "f").call(this), __classPrivateFieldGet(this, g, "f").call(this);
      });
    });
  }, m;
});
var xe = h((e) => {
  var t, o2, n2, l2;
  return l2 = class extends r(loggerMixin, we, fe, ke, formMixin)(e) {
    constructor() {
      super(...arguments), t.add(this), n2.set(this, o((e2) => {
        e2 ? this.editButton.enable() : this.editButton.disable();
      }));
    }
    onWidgetRootReady() {
      const e2 = Object.create(null, { onWidgetRootReady: { get: () => super.onWidgetRootReady } });
      return __awaiter(this, void 0, void 0, function* () {
        var i;
        yield null === (i = e2.onWidgetRootReady) || void 0 === i ? void 0 : i.call(this), __classPrivateFieldGet(this, t, "m", o2).call(this), this.subscribe(__classPrivateFieldGet(this, n2, "f").bind(this), A);
      });
    }
  }, n2 = /* @__PURE__ */ new WeakMap(), t = /* @__PURE__ */ new WeakSet(), o2 = function() {
    var e2;
    this.editButton = new d(null === (e2 = this.shadowRoot) || void 0 === e2 ? void 0 : e2.querySelector('[data-id="edit-role"]'), { logger: this.logger }), this.editButton.disable(), this.editButton.onClick(() => {
      this.editRoleModal.open();
    });
  }, l2;
});
var Se = h((e) => {
  var t, o2, s, l2;
  return l2 = class extends r(loggerMixin, we, fe)(e) {
    constructor() {
      super(...arguments), t.add(this), o2.set(this, l(() => {
        this.actions.searchRoles({ text: this.searchInput.value });
      }));
    }
    onWidgetRootReady() {
      const e2 = Object.create(null, { onWidgetRootReady: { get: () => super.onWidgetRootReady } });
      return __awaiter(this, void 0, void 0, function* () {
        var i;
        yield null === (i = e2.onWidgetRootReady) || void 0 === i ? void 0 : i.call(this), __classPrivateFieldGet(this, t, "m", s).call(this);
      });
    }
  }, o2 = /* @__PURE__ */ new WeakMap(), t = /* @__PURE__ */ new WeakSet(), s = function() {
    var e2;
    this.searchInput = new x(null === (e2 = this.shadowRoot) || void 0 === e2 ? void 0 : e2.querySelector('[data-id="search-input"]'), { logger: this.logger }), this.searchInput.onInput(__classPrivateFieldGet(this, o2, "f"));
  }, l2;
});
var je = { success: new DOMParser().parseFromString('<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g id="Checkmark">\n<path id="Shape" d="M10.0485 15.6396C9.5799 15.171 8.8201 15.171 8.35147 15.6396C7.88284 16.1082 7.88284 16.868 8.35147 17.3367L12.7072 21.6924C13.1759 22.1611 13.9357 22.1611 14.4043 21.6924L24.7152 11.3815C25.1838 10.9129 25.1838 10.1531 24.7152 9.68448C24.2466 9.21585 23.4868 9.21585 23.0181 9.68448L13.5558 19.1469L10.0485 15.6396Z" fill="currentcolor"/>\n</g>\n</svg>\n', "image/svg+xml").firstChild, error: new DOMParser().parseFromString('<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g id="Icon">\n<path id="Vector" d="M15.9998 26.6558C10.1118 26.6558 5.34375 21.8878 5.34375 15.9998C5.34375 10.1118 10.1118 5.34375 15.9998 5.34375C21.8878 5.34375 26.6558 10.1118 26.6558 15.9998C26.6558 21.8878 21.8878 26.6558 15.9998 26.6558ZM15.9998 24.4798C20.6718 24.4798 24.4798 20.7038 24.4798 15.9998C24.4798 11.3278 20.7038 7.51975 15.9998 7.51975C11.3278 7.51975 7.51975 11.2958 7.51975 15.9998C7.51975 20.6718 11.2958 24.4798 15.9998 24.4798ZM15.3278 9.34375H16.6718C17.0558 9.34375 17.3438 9.63175 17.3118 9.98375L16.9598 16.9278C16.9598 17.1838 16.7678 17.3438 16.5438 17.3438H15.4558C15.2318 17.3438 15.0398 17.1518 15.0398 16.9278L14.6878 9.98375C14.6878 9.63175 14.9758 9.34375 15.3278 9.34375ZM15.4558 19.4558H16.5438C16.9278 19.4558 17.2158 19.7438 17.1838 20.1278V21.1838C17.1838 21.5678 16.8958 21.8558 16.5438 21.8558H15.4558C15.0718 21.8558 14.7838 21.5678 14.7838 21.1838V20.1278C14.7838 19.7438 15.0718 19.4558 15.4558 19.4558Z" fill="currentcolor"/>\n</g>\n</svg>\n', "image/svg+xml").firstChild };
var Pe = h((e) => {
  var t, o2, n2, l2, d2;
  return d2 = class extends r(loggerMixin, fe, notificationsMixin, initLifecycleMixin)(e) {
    constructor() {
      super(...arguments), t.add(this), l2.set(this, o((e2) => {
        e2.length && (e2.forEach(({ type: e3, msg: i }) => {
          const s = __classPrivateFieldGet(this, t, "m", n2).call(this, e3);
          s.setContent(__classPrivateFieldGet(this, t, "m", o2).call(this, { type: e3, msg: i })), s.show();
        }), setTimeout(() => this.actions.clearNotifications()));
      }));
    }
    init() {
      const e2 = Object.create(null, { init: { get: () => super.init } });
      return __awaiter(this, void 0, void 0, function* () {
        var t2;
        yield null === (t2 = e2.init) || void 0 === t2 ? void 0 : t2.call(this), this.subscribe(__classPrivateFieldGet(this, l2, "f").bind(this), $);
      });
    }
  }, l2 = /* @__PURE__ */ new WeakMap(), t = /* @__PURE__ */ new WeakSet(), o2 = function({ type: e2, msg: t2 }) {
    const i = je[e2], o3 = Object.assign(new DOMParser().parseFromString('<svg width="2em" height="2em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g id="Icon">\n<path id="Shape" d="M10.6712 12L7.27521 8.60406C6.90826 8.23711 6.90826 7.64216 7.27521 7.27521C7.64216 6.90826 8.23711 6.90826 8.60406 7.27521L12 10.6712L15.3959 7.27521C15.7629 6.90826 16.3578 6.90826 16.7248 7.27521C17.0917 7.64216 17.0917 8.23711 16.7248 8.60406L13.3288 12L16.7248 15.3959C17.0917 15.7629 17.0917 16.3578 16.7248 16.7248C16.3578 17.0917 15.7629 17.0917 15.3959 16.7248L12 13.3288L8.60406 16.7248C8.23711 17.0917 7.64216 17.0917 7.27521 16.7248C6.90826 16.3578 6.90826 15.7629 7.27521 15.3959L10.6712 12Z" fill="currentcolor"/>\n</g>\n</svg>\n', "image/svg+xml").firstChild, { slot: "close" });
    return `${(null == i ? void 0 : i.outerHTML) || ""}${t2}${o3.outerHTML}`;
  }, n2 = function(e2) {
    return this.createNotification({ mode: e2, duration: "error" === e2 ? 0 : 3e3, position: "bottom-start", size: "sm" });
  }, d2;
});
var Le = h((e) => {
  var t, o2, l2, d2, c;
  return c = class extends r(fe, loggerMixin, we)(e) {
    constructor() {
      super(...arguments), t.add(this), l2.set(this, o((e2) => {
        this.rolesTable.data = e2;
      })), d2.set(this, l((e2, t2) => {
        const i = [], { value: o3 } = t2;
        if (o3) {
          const t3 = e2.path;
          i.push({ field: t3, desc: "desc" === o3 });
        }
        this.actions.searchRoles({ sort: i });
      }));
    }
    onWidgetRootReady() {
      const e2 = Object.create(null, { onWidgetRootReady: { get: () => super.onWidgetRootReady } });
      return __awaiter(this, void 0, void 0, function* () {
        var i;
        yield null === (i = e2.onWidgetRootReady) || void 0 === i ? void 0 : i.call(this), __classPrivateFieldGet(this, t, "m", o2).call(this), this.rolesTable.columns.forEach((e3) => {
          e3.onSortDirectionChange((e4) => {
            __classPrivateFieldGet(this, d2, "f").call(this, e4.target, e4.detail);
          });
        }), __classPrivateFieldGet(this, l2, "f").call(this, B(this.state)), this.subscribe(__classPrivateFieldGet(this, l2, "f").bind(this), B);
      });
    }
  }, l2 = /* @__PURE__ */ new WeakMap(), d2 = /* @__PURE__ */ new WeakMap(), t = /* @__PURE__ */ new WeakSet(), o2 = function() {
    var e2;
    this.rolesTable = new h2(null === (e2 = this.shadowRoot) || void 0 === e2 ? void 0 : e2.querySelector('[data-id="roles-table"]'), { logger: this.logger }), this.rolesTable.onSelectedItemsChange((e3) => {
      this.actions.setSelectedRolesIds(e3.detail.value.map(({ name: e4 }) => e4));
    });
  }, c;
});
var Ie2 = h((e) => class extends r(debuggerMixin, themeMixin, Le, Me, We, xe, Se, Pe)(e) {
  init() {
    const e2 = Object.create(null, { init: { get: () => super.init } });
    return __awaiter(this, void 0, void 0, function* () {
      var t;
      yield null === (t = e2.init) || void 0 === t ? void 0 : t.call(this);
    });
  }
});
var Ne = r((e) => class extends Ie2(e) {
})(HTMLElement);
customElements.define("descope-role-management-widget", Ne);
export {
  Ne as default
};
//# sourceMappingURL=esm-GLESQI6S.js.map
