import {
  L,
  b,
  cookieConfigMixin,
  createAsyncThunk,
  createSelector,
  createStateManagementMixin,
  d,
  debuggerMixin,
  formMixin,
  h as h2,
  modalMixin,
  notificationsMixin,
  x
} from "./chunk-XU36NMJB.js";
import {
  baseUrlMixin,
  createValidateAttributesMixin,
  descopeUiMixin,
  initElementMixin,
  projectIdMixin,
  staticResourcesMixin,
  themeMixin
} from "./chunk-JGGIE4AD.js";
import {
  Ie
} from "./chunk-5SHIU7TC.js";
import {
  initLifecycleMixin,
  loggerMixin,
  observeAttributesMixin
} from "./chunk-PGJ4DCSZ.js";
import {
  __awaiter,
  __classPrivateFieldGet,
  __classPrivateFieldSet,
  f,
  h,
  l,
  n,
  o,
  r
} from "./chunk-C4K4ZQL2.js";
import "./chunk-KEXKKQVW.js";

// node_modules/@descope/access-key-management-widget/dist/esm/index.js
var T = (e) => e.selectedAccessKeysIds;
var L2 = (e) => e.notifications;
var O = createSelector((e) => e.accessKeysList.data, (e) => e.map((e2) => Object.assign(Object.assign({}, e2), { expireTimeFormatted: (null == e2 ? void 0 : e2.expireTime) ? new Date(1e3 * ((null == e2 ? void 0 : e2.expireTime) || 0)).toLocaleString() : "Never", createdTimeFormatted: new Date(1e3 * ((null == e2 ? void 0 : e2.createdTime) || 0)).toLocaleString(), status: (null == e2 ? void 0 : e2.expireTime) && new Date(1e3 * ((null == e2 ? void 0 : e2.expireTime) || 0)) < /* @__PURE__ */ new Date() ? "expired" : null == e2 ? void 0 : e2.status })));
var P = createSelector(T, O, (e, t) => t.filter((t2) => e.includes(t2.id)));
var B = createSelector(T, (e) => !!e.length);
var D = createSelector(P, (e) => e.every((e2) => e2.editable));
var F = createSelector(D, B, (e, t) => e && t);
createSelector(T, (e) => 1 === e.length);
var q = createSelector(P, (e) => 1 === e.length ? e[0].name : `${e.length} access keys`);
var E = (e) => (...t) => (s) => {
  s.addCase(e.pending, (e2, s2) => {
    t.forEach(({ onPending: t2 }) => {
      null == t2 || t2(e2, s2);
    });
  }), s.addCase(e.fulfilled, (e2, s2) => {
    t.forEach(({ onFulfilled: t2 }) => {
      null == t2 || t2(e2, s2);
    });
  }), s.addCase(e.rejected, (e2, s2) => {
    t.forEach(({ onRejected: t2 }) => {
      null == t2 || t2(e2, s2);
    });
  });
};
var N = (e) => ({ onFulfilled: (t) => {
  e(t).loading = false;
}, onPending: (t) => {
  e(t).loading = true, e(t).error = null;
}, onRejected: (t, s) => {
  e(t).loading = false, e(t).error = s.error;
} });
var U = ({ getErrorMsg: e, getSuccessMsg: t }) => ({ onFulfilled: (e2, s) => {
  t && e2.notifications.push({ type: "success", msg: t(s) });
}, onRejected: (t2, s) => {
  e && t2.notifications.push({ type: "error", msg: e(s) });
} });
var H = createAsyncThunk("accessKeys/create", (e, { extra: { api: t } }) => t.accesskey.create(e));
var Z = E(H)({ onFulfilled: (e, t) => {
  e.accessKeysList.data.unshift(t.payload.key);
} }, N((e) => e.createAccessKey), U({ getSuccessMsg: () => "Access Key created successfully", getErrorMsg: (e) => {
  var t;
  return `
      <div>
        <div>Failed to create access key</div>
        ${null === (t = e.error) || void 0 === t ? void 0 : t.message}
      </div>`;
} }));
var V = { action: H, reducer: Z };
var z = createAsyncThunk("accessKeys/delete", (e, { extra: { api: t } }) => t.accesskey.deleteBatch(e));
var J = E(z)({ onFulfilled: (e, t) => {
  e.accessKeysList.data = e.accessKeysList.data.filter((e2) => !t.meta.arg.includes(e2.id)), e.selectedAccessKeysIds = [];
} }, N((e) => e.deleteAccessKey), U({ getSuccessMsg: (t) => f(t.meta.arg.length)`${["", t.meta.arg.length]} ${["A", "a"]}ccess key${["", "s"]} deleted successfully`, getErrorMsg: (t) => f(t.meta.arg.length)`Failed to delete access key${["", "s"]}` }));
var G = { action: z, reducer: J };
var Q = createAsyncThunk("accessKeys/search", (e, { extra: { api: t }, getState: s }) => {
  const i = s().searchParams;
  return t.accesskey.search(Object.assign(Object.assign({}, i), e));
});
var X = E(Q)({ onPending: (e, t) => {
  e.searchParams = Object.assign(Object.assign({}, e.searchParams), t.meta.arg);
}, onFulfilled: (e, t) => {
  e.accessKeysList.data = t.payload;
} }, N((e) => e.accessKeysList));
var Y = { action: Q, reducer: X };
var _ = createAsyncThunk("accessKeys/activate", (e, { extra: { api: t } }) => t.accesskey.activate(e));
var ee = E(_)({ onFulfilled: (e, t) => {
  e.accessKeysList.data.forEach((e2) => {
    t.meta.arg.includes(e2.id) && (e2.status = "active");
  });
} }, N((e) => e.activateAccessKey), U({ getSuccessMsg: (t) => f(t.meta.arg.length)`${["", t.meta.arg.length]} ${["A", "a"]}ccess key${["", "s"]} activated successfully`, getErrorMsg: (t) => f(t.meta.arg.length)`Failed to activate access key${["", "s"]}` }));
var te = { action: _, reducer: ee };
var se = createAsyncThunk("accessKeys/deactivate", (e, { extra: { api: t } }) => t.accesskey.deactivate(e));
var ie = E(se)({ onFulfilled: (e, t) => {
  e.accessKeysList.data.forEach((e2) => {
    t.meta.arg.includes(e2.id) && (e2.status = "inactive");
  });
} }, N((e) => e.deactivateAccessKey), U({ getSuccessMsg: (t) => f(t.meta.arg.length)`${["", t.meta.arg.length]} ${["A", "a"]}ccess key${["", "s"]} deactivated successfully`, getErrorMsg: (t) => f(t.meta.arg.length)`Failed to deactivate access key${["", "s"]}` }));
var ae = { action: se, reducer: ie };
var oe = createAsyncThunk("tenant/getTenantRoles", (e, { extra: { api: t } }) => t.tenant.getTenantRoles());
var ce = { action: oe, reducer: E(oe)({ onFulfilled: (e, t) => {
  e.tenantRoles.data = t.payload.roles;
} }, N((e) => e.tenantRoles)) };
var ne = { accessKeysList: { data: [], loading: false, error: null }, createAccessKey: { loading: false, error: null }, activateAccessKey: { loading: false, error: null }, deactivateAccessKey: { loading: false, error: null }, deleteAccessKey: { loading: false, error: null }, tenantRoles: { loading: false, error: null, data: [] }, searchParams: { text: "", sort: [] }, selectedAccessKeysIds: [], notifications: [] };
var de = { search: "/v1/mgmt/accesskey/search", deleteBatch: "/v1/mgmt/accesskey/delete/batch", create: "/v1/mgmt/accesskey/create", deactivate: "/v1/mgmt/accesskey/deactivate/batch", activate: "/v1/mgmt/accesskey/activate/batch" };
var re = { roles: "/v1/mgmt/role/all" };
var le = (e) => __awaiter(void 0, void 0, void 0, function* () {
  const t = yield e.text(), s = JSON.parse(t);
  if (!e.ok) {
    const t2 = `${s.errorDescription}${s.errorMessage ? `: ${s.errorMessage}` : ""}`;
    throw Error(t2 || `${e.status} ${e.statusText}`);
  }
  e.json = () => Promise.resolve(s), e.text = () => Promise.resolve(t);
});
var ue = (...e) => __awaiter(void 0, [...e], void 0, function* ({ text: e2, sort: t } = {}) {
  return new Promise((s) => {
    const i = [], a = (/* @__PURE__ */ new Date()).getTime() / 1e3 + 2592e3, o2 = new Date(a).toLocaleString();
    for (let e3 = 1; e3 < 10; e3 += 1) i.push({ id: `access-key-id-${e3}`, name: `Access Key ${e3}`, createdBy: `User ${e3}`, editable: true, expireTime: a, expireTimeFormatted: o2, createdTime: a, createdTimeFormatted: o2, roleNames: [`Role ${e3}`], permittedIps: ["127.1.2.3"], status: "active", clientId: `Client ID ${e3}`, boundUserId: `User ${e3}` });
    t.forEach((e3) => {
      i.sort((t2, s2) => {
        var i2, a2;
        return e3.desc ? null === (a2 = s2[e3.field]) || void 0 === a2 ? void 0 : a2.localeCompare(t2[e3.field]) : null === (i2 = t2[e3.field]) || void 0 === i2 ? void 0 : i2.localeCompare(s2[e3.field]);
      });
    }), s(i.filter((t2) => t2.name.toLowerCase().includes(e2.toLowerCase()) || t2.createdBy.toLowerCase().includes(e2.toLowerCase())));
  });
});
var he = (e, t) => __awaiter(void 0, [e, t], void 0, function* ({ name: e2, roleNames: t2, userId: s, permittedIps: i }, a) {
  const o2 = Math.random().toString(10).substring(15);
  return new Promise((c) => {
    c({ cleartext: Math.random().toString(20).substring(2), key: { id: `access-key-id-${o2}`, name: e2 || `Access Key ${o2}`, createdBy: s || `User ${o2}`, editable: true, expireTime: a, createdTime: (/* @__PURE__ */ new Date()).getTime() / 1e3, roleNames: t2, permittedIps: i, status: "active", clientId: `Client ID ${o2}`, boundUserId: s || `User ${o2}` } });
  });
});
var ge = () => __awaiter(void 0, void 0, void 0, function* () {
});
var ve = () => __awaiter(void 0, void 0, void 0, function* () {
});
var ye = () => __awaiter(void 0, void 0, void 0, function* () {
});
var me = (e) => new Promise((t) => {
  const s = [];
  for (let t2 = 1; t2 < 5; t2 += 1) s.push({ name: `Role ${t2}`, description: `Role description ${t2}`, createdTime: /* @__PURE__ */ new Date(), permissionNames: [`Permission ${t2}`], tenantId: e });
  t({ roles: s });
});
var pe = ({ httpClient: e, tenant: t, mock: s }) => ({ search: (...i) => __awaiter(void 0, [...i], void 0, function* ({ page: i2, limit: a = 1e4, text: o2, sort: c } = {}) {
  if (s) return ue({ page: i2, limit: a, text: o2, sort: c });
  const n2 = yield e.post(de.search, { limit: a, page: i2, text: o2, sort: c }, { queryParams: { tenant: t } });
  yield le(n2);
  return (yield n2.json()).keys;
}), deleteBatch: (i) => __awaiter(void 0, void 0, void 0, function* () {
  if (s) return ye();
  const a = yield e.post(de.deleteBatch, { ids: i }, { queryParams: { tenant: t } });
  return yield le(a), a.json();
}), create: (i) => __awaiter(void 0, [i], void 0, function* ({ name: i2, expiration: a, roleNames: o2, userId: c, permittedIps: n2 }) {
  const d2 = /* @__PURE__ */ new Date();
  d2.setDate(d2.getDate() + +a);
  const r2 = "0" === a[0] ? 0 : Math.floor(d2.getTime() / 1e3);
  if (s) return he({ name: i2, expiration: a, roleNames: o2, userId: c, permittedIps: n2 }, r2);
  const l2 = yield e.post(de.create, { name: i2, expireTime: r2, roleNames: o2, userId: c, permittedIps: n2 }, { queryParams: { tenant: t } });
  yield le(l2);
  return yield l2.json();
}), activate: (i) => __awaiter(void 0, void 0, void 0, function* () {
  if (s) return ge();
  const a = yield e.post(de.activate, { ids: i }, { queryParams: { tenant: t } });
  yield le(a);
  return yield a.json();
}), deactivate: (i) => __awaiter(void 0, void 0, void 0, function* () {
  if (s) return ve();
  const a = yield e.post(de.deactivate, { ids: i }, { queryParams: { tenant: t } });
  yield le(a);
  return yield a.json();
}) });
var fe = ({ httpClient: e, tenant: t, mock: s }) => ({ getTenantRoles: () => __awaiter(void 0, void 0, void 0, function* () {
  if (s) return me(t);
  const i = yield e.get(re.roles, { queryParams: { tenant: t } });
  return yield le(i), i.json();
}) });
var Re = h((e) => {
  var t, i, a, o2;
  const y = r(projectIdMixin, observeAttributesMixin, loggerMixin, baseUrlMixin, cookieConfigMixin, createValidateAttributesMixin({ tenant: createValidateAttributesMixin.missingAttrValidator }))(e);
  return o2 = class extends y {
    constructor() {
      super(...arguments), t.add(this), i.set(this, void 0);
    }
    get tenantId() {
      return this.getAttribute("tenant");
    }
    get widgetId() {
      return this.getAttribute("widget-id");
    }
    get mock() {
      return this.getAttribute("mock");
    }
    get api() {
      return __classPrivateFieldGet(this, i, "f") || __classPrivateFieldGet(this, t, "m", a).call(this), __classPrivateFieldGet(this, i, "f");
    }
    init() {
      const e2 = Object.create(null, { init: { get: () => super.init } });
      return __awaiter(this, void 0, void 0, function* () {
        var s;
        yield null === (s = e2.init) || void 0 === s ? void 0 : s.call(this), this.observeAttributes(["project-id", "base-url", "tenant"], () => {
          __classPrivateFieldGet(this, i, "f") && __classPrivateFieldGet(this, t, "m", a).call(this);
        });
      });
    }
  }, i = /* @__PURE__ */ new WeakMap(), t = /* @__PURE__ */ new WeakSet(), a = function() {
    this.logger.debug("creating an sdk instance"), __classPrivateFieldSet(this, i, ((e2, t2, s, i2) => {
      const a2 = Ie(Object.assign(Object.assign({}, e2), { persistTokens: true, baseHeaders: { "x-descope-widget-type": "access-key-management-widget", "x-descope-widget-id": i2, "x-descope-widget-version": "0.5.9" } }));
      return { accesskey: pe({ httpClient: a2.httpClient, tenant: t2, mock: s }), tenant: fe({ httpClient: a2.httpClient, tenant: t2, mock: s }) };
    })({ projectId: this.projectId, baseUrl: this.baseUrl, refreshCookieName: this.refreshCookieName }, this.tenantId, "true" === this.mock, this.widgetId), "f");
  }, o2;
});
var we = h((e) => {
  const t = r(createStateManagementMixin({ name: "widget", initialState: ne, reducers: { setSelectedAccessKeysIds: (e2, { payload: t2 }) => {
    e2.selectedAccessKeysIds = t2;
  }, clearNotifications: (e2) => {
    e2.notifications = [];
  } }, extraReducers: (e2) => {
    V.reducer(e2), G.reducer(e2), Y.reducer(e2), te.reducer(e2), ae.reducer(e2), ce.reducer(e2);
  }, asyncActions: { searchAccessKeys: Y.action, createAccessKey: V.action, activateAccessKeys: te.action, deactivateAccessKeys: ae.action, deleteAccessKeys: G.action, getTenantRoles: ce.action } }), initLifecycleMixin, loggerMixin, Re)(e);
  return class extends t {
    constructor(...e2) {
      super(...e2), this.state = ne, this.subscribe((e3) => {
        this.logger.debug("State update:", e3), this.state = e3;
      });
    }
  };
});
var ke = h((e) => {
  const t = r(staticResourcesMixin, createValidateAttributesMixin({ "widget-id": createValidateAttributesMixin.missingAttrValidator }))(e);
  return class extends t {
    get widgetId() {
      return this.getAttribute("widget-id");
    }
    fetchWidgetPage(e2) {
      return __awaiter(this, void 0, void 0, function* () {
        const t2 = yield this.fetchStaticResource(`access-key-management-widget/${this.widgetId}/${e2}`, "text");
        return null == t2 ? void 0 : t2.body;
      });
    }
  };
});
var be = h((e) => {
  var t, a, o2;
  return o2 = class extends r(loggerMixin, initLifecycleMixin, descopeUiMixin, initElementMixin, ke, we)(e) {
    constructor() {
      super(...arguments), t.add(this);
    }
    onWidgetRootReady() {
      return __awaiter(this, void 0, void 0, function* () {
      });
    }
    init() {
      const e2 = Object.create(null, { init: { get: () => super.init } });
      return __awaiter(this, void 0, void 0, function* () {
        var s;
        yield null === (s = e2.init) || void 0 === s ? void 0 : s.call(this), yield Promise.all([__classPrivateFieldGet(this, t, "m", a).call(this), this.actions.searchAccessKeys(), this.actions.getTenantRoles()]), this.onWidgetRootReady();
      });
    }
  }, t = /* @__PURE__ */ new WeakSet(), a = function() {
    return __awaiter(this, void 0, void 0, function* () {
      const e2 = n(yield this.fetchWidgetPage("root.html"));
      yield this.loadDescopeUiComponents(e2), this.contentRootElement.append(e2.content.cloneNode(true));
    });
  }, o2;
});
var Ke = h((e) => {
  var t, i, d2, r2, l2;
  return l2 = class extends r(we, loggerMixin, be)(e) {
    constructor() {
      super(...arguments), t.add(this), d2.set(this, o((e2) => {
        this.accessKeysTable.data = e2;
      })), r2.set(this, l((e2, t2) => {
        const s = [], { value: i2 } = t2;
        if (i2) {
          const t3 = e2.path;
          s.push({ field: t3, desc: "desc" === i2 });
        }
        this.actions.searchAccessKeys({ sort: s });
      }));
    }
    onWidgetRootReady() {
      const e2 = Object.create(null, { onWidgetRootReady: { get: () => super.onWidgetRootReady } });
      return __awaiter(this, void 0, void 0, function* () {
        var s;
        yield null === (s = e2.onWidgetRootReady) || void 0 === s ? void 0 : s.call(this), __classPrivateFieldGet(this, t, "m", i).call(this), this.accessKeysTable.columns.forEach((e3) => {
          e3.onSortDirectionChange((e4) => {
            __classPrivateFieldGet(this, r2, "f").call(this, e4.target, e4.detail);
          });
        }), __classPrivateFieldGet(this, d2, "f").call(this, O(this.state)), this.subscribe(__classPrivateFieldGet(this, d2, "f").bind(this), O);
      });
    }
  }, d2 = /* @__PURE__ */ new WeakMap(), r2 = /* @__PURE__ */ new WeakMap(), t = /* @__PURE__ */ new WeakSet(), i = function() {
    var e2;
    this.accessKeysTable = new h2(null === (e2 = this.shadowRoot) || void 0 === e2 ? void 0 : e2.querySelector('[data-id="access-keys-table"]'), { logger: this.logger }), this.accessKeysTable.onSelectedItemsChange((e3) => {
      this.actions.setSelectedAccessKeysIds(e3.detail.value.map(({ id: e4 }) => e4));
    });
  }, l2;
});
var Me = h((e) => {
  var t, a, o2;
  return o2 = class extends r(we, modalMixin, loggerMixin, be)(e) {
    constructor() {
      super(...arguments), t.add(this);
    }
    onWidgetRootReady() {
      const e2 = Object.create(null, { onWidgetRootReady: { get: () => super.onWidgetRootReady } });
      return __awaiter(this, void 0, void 0, function* () {
        var s;
        yield null === (s = e2.onWidgetRootReady) || void 0 === s ? void 0 : s.call(this), yield __classPrivateFieldGet(this, t, "m", a).call(this);
      });
    }
  }, t = /* @__PURE__ */ new WeakSet(), a = function() {
    return __awaiter(this, void 0, void 0, function* () {
      var e2;
      this.activateAccessKeysModal = this.createModal(), this.activateAccessKeysModal.setContent(n(yield this.fetchWidgetPage("activate-access-keys-modal.html")));
      const t2 = new d(() => {
        var e3;
        return null === (e3 = this.activateAccessKeysModal.ele) || void 0 === e3 ? void 0 : e3.querySelector('[data-id="modal-cancel"]');
      }, { logger: this.logger });
      t2.onClick(() => this.activateAccessKeysModal.close());
      const s = new d(() => {
        var e3;
        return null === (e3 = this.activateAccessKeysModal.ele) || void 0 === e3 ? void 0 : e3.querySelector('[data-id="modal-submit"]');
      }, { logger: this.logger });
      s.onClick(() => {
        const e3 = P(this.state);
        this.actions.activateAccessKeys(null == e3 ? void 0 : e3.map((e4) => e4.id)), this.activateAccessKeysModal.close();
      });
      const a2 = new L(null === (e2 = this.activateAccessKeysModal.ele) || void 0 === e2 ? void 0 : e2.querySelector('[data-id="body-text"]'), { logger: this.logger });
      this.activateAccessKeysModal.beforeOpen = () => {
        const e3 = q(this.state);
        a2.text = `Activate ${e3}?`;
      };
    });
  }, o2;
});
var Ae = h((e) => {
  var t, i, o2, d2;
  return d2 = class extends r(loggerMixin, be, we, Me)(e) {
    constructor() {
      super(...arguments), t.add(this), o2.set(this, o((e2) => {
        e2 ? this.activateButton.enable() : this.activateButton.disable();
      }));
    }
    onWidgetRootReady() {
      const e2 = Object.create(null, { onWidgetRootReady: { get: () => super.onWidgetRootReady } });
      return __awaiter(this, void 0, void 0, function* () {
        var s;
        yield null === (s = e2.onWidgetRootReady) || void 0 === s ? void 0 : s.call(this), __classPrivateFieldGet(this, t, "m", i).call(this), this.subscribe(__classPrivateFieldGet(this, o2, "f").bind(this), F);
      });
    }
  }, o2 = /* @__PURE__ */ new WeakMap(), t = /* @__PURE__ */ new WeakSet(), i = function() {
    var e2;
    this.activateButton = new d(null === (e2 = this.shadowRoot) || void 0 === e2 ? void 0 : e2.querySelector('[data-id="activate-access-keys"]'), { logger: this.logger }), this.activateButton.disable(), this.activateButton.onClick(() => {
      this.activateAccessKeysModal.open();
    });
  }, d2;
});
var We = h((e) => {
  var t, a, o2;
  return o2 = class extends r(we, modalMixin, formMixin, loggerMixin, be)(e) {
    constructor() {
      super(...arguments), t.add(this);
    }
    onWidgetRootReady() {
      const e2 = Object.create(null, { onWidgetRootReady: { get: () => super.onWidgetRootReady } });
      return __awaiter(this, void 0, void 0, function* () {
        var s;
        yield null === (s = e2.onWidgetRootReady) || void 0 === s ? void 0 : s.call(this), __classPrivateFieldGet(this, t, "m", a).call(this);
      });
    }
  }, t = /* @__PURE__ */ new WeakSet(), a = function() {
    return __awaiter(this, void 0, void 0, function* () {
      this.createdAccessKeyModal = this.createModal(), this.createdAccessKeyModal.setContent(n(yield this.fetchWidgetPage("created-access-key-modal.html")));
      new d(() => {
        var e2;
        return null === (e2 = this.createdAccessKeyModal.ele) || void 0 === e2 ? void 0 : e2.querySelector('[data-id="modal-close"]');
      }, { logger: this.logger }).onClick(() => {
        navigator.clipboard.writeText(this.getFormData(this.createdAccessKeyModal.ele)["generated-key"]), this.resetFormData(this.createdAccessKeyModal.ele), this.createdAccessKeyModal.close();
      });
    });
  }, o2;
});
var Ce = h((e) => {
  var t, a, o2, r2, l2;
  return l2 = class extends r(we, modalMixin, formMixin, loggerMixin, be, We)(e) {
    constructor() {
      super(...arguments), t.add(this), a.set(this, void 0), r2.set(this, () => __awaiter(this, void 0, void 0, function* () {
        var e2, t2;
        yield __classPrivateFieldGet(this, a, "f").setData(null === (t2 = this.state, e2 = t2.tenantRoles.data || []) || void 0 === e2 ? void 0 : e2.map(({ name: e3 }) => ({ value: e3, label: e3 })));
      }));
    }
    onWidgetRootReady() {
      const e2 = Object.create(null, { onWidgetRootReady: { get: () => super.onWidgetRootReady } });
      return __awaiter(this, void 0, void 0, function* () {
        var s;
        yield null === (s = e2.onWidgetRootReady) || void 0 === s ? void 0 : s.call(this), __classPrivateFieldGet(this, t, "m", o2).call(this);
      });
    }
  }, a = /* @__PURE__ */ new WeakMap(), r2 = /* @__PURE__ */ new WeakMap(), t = /* @__PURE__ */ new WeakSet(), o2 = function e2() {
    return __awaiter(this, void 0, void 0, function* () {
      this.createAccessKeyModal = this.createModal(), this.createAccessKeyModal.setContent(n(yield this.fetchWidgetPage("create-access-key-modal.html")));
      new d(() => {
        var e3;
        return null === (e3 = this.createAccessKeyModal.ele) || void 0 === e3 ? void 0 : e3.querySelector('[data-id="modal-cancel"]');
      }, { logger: this.logger }).onClick(() => {
        this.createAccessKeyModal.close(), this.resetFormData(this.createAccessKeyModal.ele);
      });
      new d(() => {
        var e3;
        return null === (e3 = this.createAccessKeyModal.ele) || void 0 === e3 ? void 0 : e3.querySelector('[data-id="modal-submit"]');
      }, { logger: this.logger }).onClick(() => __awaiter(this, void 0, void 0, function* () {
        var e3, t2;
        if (this.validateForm(this.createAccessKeyModal.ele)) {
          const s = yield this.actions.createAccessKey(Object.assign({}, this.getFormData(this.createAccessKeyModal.ele)));
          this.createAccessKeyModal.close(), (null === (e3 = null == s ? void 0 : s.payload) || void 0 === e3 ? void 0 : e3.cleartext) && (this.setFormData(this.createdAccessKeyModal.ele, { "generated-key": null === (t2 = null == s ? void 0 : s.payload) || void 0 === t2 ? void 0 : t2.cleartext }), this.createdAccessKeyModal.open());
        }
      })), __classPrivateFieldSet(this, a, new b(() => {
        var e3;
        return null === (e3 = this.createAccessKeyModal.ele) || void 0 === e3 ? void 0 : e3.querySelector('[data-id="roles-multiselect"]');
      }, { logger: this.logger }), "f"), __classPrivateFieldGet(this, r2, "f").call(this), this.createAccessKeyModal.afterClose = () => {
        __classPrivateFieldGet(this, t, "m", e2).call(this);
      };
    });
  }, l2;
});
var xe = h((e) => {
  var t, i, a;
  return a = class extends r(loggerMixin, Ce, be)(e) {
    constructor() {
      super(...arguments), t.add(this);
    }
    onWidgetRootReady() {
      const e2 = Object.create(null, { onWidgetRootReady: { get: () => super.onWidgetRootReady } });
      return __awaiter(this, void 0, void 0, function* () {
        var s;
        yield null === (s = e2.onWidgetRootReady) || void 0 === s ? void 0 : s.call(this), __classPrivateFieldGet(this, t, "m", i).call(this);
      });
    }
  }, t = /* @__PURE__ */ new WeakSet(), i = function() {
    var e2;
    this.createButton = new d(null === (e2 = this.shadowRoot) || void 0 === e2 ? void 0 : e2.querySelector('[data-id="create-access-key"]'), { logger: this.logger }), this.createButton.onClick(() => this.createAccessKeyModal.open());
  }, a;
});
var Se = h((e) => {
  var t, a, o2;
  return o2 = class extends r(we, modalMixin, loggerMixin, be)(e) {
    constructor() {
      super(...arguments), t.add(this);
    }
    onWidgetRootReady() {
      const e2 = Object.create(null, { onWidgetRootReady: { get: () => super.onWidgetRootReady } });
      return __awaiter(this, void 0, void 0, function* () {
        var s;
        yield null === (s = e2.onWidgetRootReady) || void 0 === s ? void 0 : s.call(this), yield __classPrivateFieldGet(this, t, "m", a).call(this);
      });
    }
  }, t = /* @__PURE__ */ new WeakSet(), a = function() {
    return __awaiter(this, void 0, void 0, function* () {
      var e2;
      this.deactivateAccessKeysModal = this.createModal(), this.deactivateAccessKeysModal.setContent(n(yield this.fetchWidgetPage("deactivate-access-keys-modal.html")));
      const t2 = new d(() => {
        var e3;
        return null === (e3 = this.deactivateAccessKeysModal.ele) || void 0 === e3 ? void 0 : e3.querySelector('[data-id="modal-cancel"]');
      }, { logger: this.logger });
      t2.onClick(() => this.deactivateAccessKeysModal.close());
      const s = new d(() => {
        var e3;
        return null === (e3 = this.deactivateAccessKeysModal.ele) || void 0 === e3 ? void 0 : e3.querySelector('[data-id="modal-submit"]');
      }, { logger: this.logger });
      s.onClick(() => {
        const e3 = P(this.state);
        this.actions.deactivateAccessKeys(null == e3 ? void 0 : e3.map((e4) => e4.id)), this.deactivateAccessKeysModal.close();
      });
      const a2 = new L(null === (e2 = this.deactivateAccessKeysModal.ele) || void 0 === e2 ? void 0 : e2.querySelector('[data-id="body-text"]'), { logger: this.logger });
      this.deactivateAccessKeysModal.beforeOpen = () => {
        const e3 = q(this.state);
        a2.text = `Deactivate ${e3}?`;
      };
    });
  }, o2;
});
var je = h((e) => {
  var t, i, o2, d2;
  return d2 = class extends r(loggerMixin, be, we, Se)(e) {
    constructor() {
      super(...arguments), t.add(this), o2.set(this, o((e2) => {
        e2 ? this.deactivateButton.enable() : this.deactivateButton.disable();
      }));
    }
    onWidgetRootReady() {
      const e2 = Object.create(null, { onWidgetRootReady: { get: () => super.onWidgetRootReady } });
      return __awaiter(this, void 0, void 0, function* () {
        var s;
        yield null === (s = e2.onWidgetRootReady) || void 0 === s ? void 0 : s.call(this), __classPrivateFieldGet(this, t, "m", i).call(this), this.subscribe(__classPrivateFieldGet(this, o2, "f").bind(this), F);
      });
    }
  }, o2 = /* @__PURE__ */ new WeakMap(), t = /* @__PURE__ */ new WeakSet(), i = function() {
    var e2;
    this.deactivateButton = new d(null === (e2 = this.shadowRoot) || void 0 === e2 ? void 0 : e2.querySelector('[data-id="deactivate-access-keys"]'), { logger: this.logger }), this.deactivateButton.disable(), this.deactivateButton.onClick(() => {
      this.deactivateAccessKeysModal.open();
    });
  }, d2;
});
var $e = h((e) => {
  var t, a, o2;
  return o2 = class extends r(we, modalMixin, loggerMixin, be)(e) {
    constructor() {
      super(...arguments), t.add(this);
    }
    onWidgetRootReady() {
      const e2 = Object.create(null, { onWidgetRootReady: { get: () => super.onWidgetRootReady } });
      return __awaiter(this, void 0, void 0, function* () {
        var s;
        yield null === (s = e2.onWidgetRootReady) || void 0 === s ? void 0 : s.call(this), yield __classPrivateFieldGet(this, t, "m", a).call(this);
      });
    }
  }, t = /* @__PURE__ */ new WeakSet(), a = function() {
    return __awaiter(this, void 0, void 0, function* () {
      var e2;
      this.deleteAccessKeysModal = this.createModal(), this.deleteAccessKeysModal.setContent(n(yield this.fetchWidgetPage("delete-access-keys-modal.html")));
      const t2 = new d(() => {
        var e3;
        return null === (e3 = this.deleteAccessKeysModal.ele) || void 0 === e3 ? void 0 : e3.querySelector('[data-id="modal-cancel"]');
      }, { logger: this.logger });
      t2.onClick(() => this.deleteAccessKeysModal.close());
      const s = new d(() => {
        var e3;
        return null === (e3 = this.deleteAccessKeysModal.ele) || void 0 === e3 ? void 0 : e3.querySelector('[data-id="modal-submit"]');
      }, { logger: this.logger });
      s.onClick(() => {
        const e3 = P(this.state);
        this.actions.deleteAccessKeys(null == e3 ? void 0 : e3.map((e4) => e4.id)), this.deleteAccessKeysModal.close();
      });
      const a2 = new L(null === (e2 = this.deleteAccessKeysModal.ele) || void 0 === e2 ? void 0 : e2.querySelector('[data-id="body-text"]'), { logger: this.logger });
      this.deleteAccessKeysModal.beforeOpen = () => {
        const e3 = q(this.state);
        a2.text = `Delete ${e3}?`;
      };
    });
  }, o2;
});
var Ie2 = h((e) => {
  var t, i, o2, d2;
  return d2 = class extends r(loggerMixin, be, we, $e)(e) {
    constructor() {
      super(...arguments), t.add(this), o2.set(this, o((e2) => {
        e2 ? this.deleteButton.enable() : this.deleteButton.disable();
      }));
    }
    onWidgetRootReady() {
      const e2 = Object.create(null, { onWidgetRootReady: { get: () => super.onWidgetRootReady } });
      return __awaiter(this, void 0, void 0, function* () {
        var s;
        yield null === (s = e2.onWidgetRootReady) || void 0 === s ? void 0 : s.call(this), __classPrivateFieldGet(this, t, "m", i).call(this), this.subscribe(__classPrivateFieldGet(this, o2, "f").bind(this), F);
      });
    }
  }, o2 = /* @__PURE__ */ new WeakMap(), t = /* @__PURE__ */ new WeakSet(), i = function() {
    var e2;
    this.deleteButton = new d(null === (e2 = this.shadowRoot) || void 0 === e2 ? void 0 : e2.querySelector('[data-id="delete-access-keys"]'), { logger: this.logger }), this.deleteButton.disable(), this.deleteButton.onClick(() => {
      this.deleteAccessKeysModal.open();
    });
  }, d2;
});
var Te = h((e) => {
  var t, i, a, d2;
  return d2 = class extends r(loggerMixin, be, we)(e) {
    constructor() {
      super(...arguments), t.add(this), i.set(this, l(() => {
        this.actions.searchAccessKeys({ text: this.searchInput.value });
      }));
    }
    onWidgetRootReady() {
      const e2 = Object.create(null, { onWidgetRootReady: { get: () => super.onWidgetRootReady } });
      return __awaiter(this, void 0, void 0, function* () {
        var s;
        yield null === (s = e2.onWidgetRootReady) || void 0 === s ? void 0 : s.call(this), __classPrivateFieldGet(this, t, "m", a).call(this);
      });
    }
  }, i = /* @__PURE__ */ new WeakMap(), t = /* @__PURE__ */ new WeakSet(), a = function() {
    var e2;
    this.searchInput = new x(null === (e2 = this.shadowRoot) || void 0 === e2 ? void 0 : e2.querySelector('[data-id="search-input"]'), { logger: this.logger }), this.searchInput.onInput(__classPrivateFieldGet(this, i, "f"));
  }, d2;
});
var Le = { success: new DOMParser().parseFromString('<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g id="Checkmark">\n<path id="Shape" d="M10.0485 15.6396C9.5799 15.171 8.8201 15.171 8.35147 15.6396C7.88284 16.1082 7.88284 16.868 8.35147 17.3367L12.7072 21.6924C13.1759 22.1611 13.9357 22.1611 14.4043 21.6924L24.7152 11.3815C25.1838 10.9129 25.1838 10.1531 24.7152 9.68448C24.2466 9.21585 23.4868 9.21585 23.0181 9.68448L13.5558 19.1469L10.0485 15.6396Z" fill="currentcolor"/>\n</g>\n</svg>\n', "image/svg+xml").firstChild, error: new DOMParser().parseFromString('<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g id="Icon">\n<path id="Vector" d="M15.9998 26.6558C10.1118 26.6558 5.34375 21.8878 5.34375 15.9998C5.34375 10.1118 10.1118 5.34375 15.9998 5.34375C21.8878 5.34375 26.6558 10.1118 26.6558 15.9998C26.6558 21.8878 21.8878 26.6558 15.9998 26.6558ZM15.9998 24.4798C20.6718 24.4798 24.4798 20.7038 24.4798 15.9998C24.4798 11.3278 20.7038 7.51975 15.9998 7.51975C11.3278 7.51975 7.51975 11.2958 7.51975 15.9998C7.51975 20.6718 11.2958 24.4798 15.9998 24.4798ZM15.3278 9.34375H16.6718C17.0558 9.34375 17.3438 9.63175 17.3118 9.98375L16.9598 16.9278C16.9598 17.1838 16.7678 17.3438 16.5438 17.3438H15.4558C15.2318 17.3438 15.0398 17.1518 15.0398 16.9278L14.6878 9.98375C14.6878 9.63175 14.9758 9.34375 15.3278 9.34375ZM15.4558 19.4558H16.5438C16.9278 19.4558 17.2158 19.7438 17.1838 20.1278V21.1838C17.1838 21.5678 16.8958 21.8558 16.5438 21.8558H15.4558C15.0718 21.8558 14.7838 21.5678 14.7838 21.1838V20.1278C14.7838 19.7438 15.0718 19.4558 15.4558 19.4558Z" fill="currentcolor"/>\n</g>\n</svg>\n', "image/svg+xml").firstChild };
var Oe = h((e) => {
  var t, i, o2, d2, r2;
  return r2 = class extends r(loggerMixin, we, notificationsMixin, initLifecycleMixin)(e) {
    constructor() {
      super(...arguments), t.add(this), d2.set(this, o((e2) => {
        e2.length && (e2.forEach(({ type: e3, msg: s }) => {
          const a = __classPrivateFieldGet(this, t, "m", o2).call(this, e3);
          a.setContent(__classPrivateFieldGet(this, t, "m", i).call(this, { type: e3, msg: s })), a.show();
        }), setTimeout(() => this.actions.clearNotifications()));
      }));
    }
    init() {
      const e2 = Object.create(null, { init: { get: () => super.init } });
      return __awaiter(this, void 0, void 0, function* () {
        var t2;
        yield null === (t2 = e2.init) || void 0 === t2 ? void 0 : t2.call(this), this.subscribe(__classPrivateFieldGet(this, d2, "f").bind(this), L2);
      });
    }
  }, d2 = /* @__PURE__ */ new WeakMap(), t = /* @__PURE__ */ new WeakSet(), i = function({ type: e2, msg: t2 }) {
    const s = Le[e2], i2 = Object.assign(new DOMParser().parseFromString('<svg width="2em" height="2em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g id="Icon">\n<path id="Shape" d="M10.6712 12L7.27521 8.60406C6.90826 8.23711 6.90826 7.64216 7.27521 7.27521C7.64216 6.90826 8.23711 6.90826 8.60406 7.27521L12 10.6712L15.3959 7.27521C15.7629 6.90826 16.3578 6.90826 16.7248 7.27521C17.0917 7.64216 17.0917 8.23711 16.7248 8.60406L13.3288 12L16.7248 15.3959C17.0917 15.7629 17.0917 16.3578 16.7248 16.7248C16.3578 17.0917 15.7629 17.0917 15.3959 16.7248L12 13.3288L8.60406 16.7248C8.23711 17.0917 7.64216 17.0917 7.27521 16.7248C6.90826 16.3578 6.90826 15.7629 7.27521 15.3959L10.6712 12Z" fill="currentcolor"/>\n</g>\n</svg>\n', "image/svg+xml").firstChild, { slot: "close" });
    return `${(null == s ? void 0 : s.outerHTML) || ""}${t2}${i2.outerHTML}`;
  }, o2 = function(e2) {
    return this.createNotification({ mode: e2, duration: "error" === e2 ? 0 : 3e3, position: "bottom-start", size: "sm" });
  }, r2;
});
var Pe = h((e) => class extends r(debuggerMixin, themeMixin, Ke, xe, Ie2, Te, Ae, je, Oe)(e) {
  init() {
    const e2 = Object.create(null, { init: { get: () => super.init } });
    return __awaiter(this, void 0, void 0, function* () {
      var t;
      yield null === (t = e2.init) || void 0 === t ? void 0 : t.call(this);
    });
  }
});
var Be = r((e) => class extends Pe(e) {
})(HTMLElement);
customElements.define("descope-access-key-management-widget", Be);
export {
  Be as default
};
//# sourceMappingURL=esm-TOLHJQGV.js.map
