{"version":3,"file":"index.esm.js","sources":["../src/BaseDriver.ts","../src/helpers.ts","../src/AppsListDriver.ts","../src/AvatarDriver.ts","../src/ButtonDriver.ts","../src/FlowDriver.ts","../src/GenericFlowButtonDriver.ts","../src/gridDrivers/GridDriver.ts","../src/gridDrivers/GridTextColumnDriver.ts","../src/gridDrivers/GridCustomColumnDriver.ts","../src/LinkDriver.ts","../src/ModalDriver.ts","../src/MultiSelectDriver.ts","../src/NotificationDriver.ts","../src/OutboundAppsListDriver.ts","../src/SingleSelectDriver.ts","../src/TextDriver.ts","../src/TextFieldDriver.ts","../src/UserAttributeDriver.ts","../src/UserAuthMethodDriver.ts"],"sourcesContent":["import { waitForElement } from './helpers';\nimport { RefOrRefFn } from './types';\n\ntype Logger = {\n  error(...data: any[]): void;\n  warn(...data: any[]): void;\n  info(...data: any[]): void;\n  debug(...data: any[]): void;\n};\n\nexport class BaseDriver {\n  #ele: RefOrRefFn;\n\n  logger: Logger | undefined;\n\n  // eslint-disable-next-line class-methods-use-this\n  nodeName = '';\n\n  constructor(refOrRefFn: RefOrRefFn, config: { logger: Logger }) {\n    this.#ele = refOrRefFn;\n    this.logger = config.logger;\n  }\n\n  get asyncEle() {\n    return waitForElement(this.#ele, 1000);\n  }\n\n  get ele() {\n    const ele = typeof this.#ele === 'function' ? this.#ele() : this.#ele;\n    if (!ele) {\n      this.logger?.debug(\n        `Driver element is not available for ${this.nodeName}`,\n        new Error(),\n      );\n\n      return null;\n    }\n\n    if (ele?.localName !== this.nodeName) {\n      this.logger?.debug(\n        `node name do not match, expected \"${this.nodeName}\", received \"${ele.localName}\" `,\n        Error(),\n      );\n\n      return null;\n    }\n\n    return ele;\n  }\n}\n","import { RefOrRefFn } from './types';\n\nexport const waitForElement = async (ele: RefOrRefFn, timeout: number) =>\n  new Promise<Element | null>((resolve) => {\n    const interval = setInterval(() => {\n      const element = typeof ele === 'function' ? ele() : ele;\n      if (element) {\n        clearInterval(interval);\n        resolve(element);\n      }\n    }, 100);\n    setTimeout(() => {\n      clearInterval(interval);\n      resolve(null);\n    }, timeout);\n  });\n","import { BaseDriver } from './BaseDriver';\n\ntype Data = { name: string; icon: string; url: string }[];\n\nexport class AppsListDriver extends BaseDriver {\n  nodeName = 'descope-apps-list';\n\n  set data(data: Data) {\n    if (this.ele) this.ele.data = data;\n  }\n\n  get data() {\n    return this.ele?.data;\n  }\n\n  get ele() {\n    return super.ele as Element & {\n      data: Data;\n    };\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\nexport class AvatarDriver extends BaseDriver {\n  nodeName = 'descope-avatar';\n\n  set displayName(name: string) {\n    this.ele?.setAttribute('display-name', name);\n  }\n\n  set image(imgUrl: string) {\n    this.ele?.setAttribute('img', imgUrl);\n  }\n\n  get flowId() {\n    return this.ele?.getAttribute('flow-id');\n  }\n\n  onClick(cb: (e: Event) => void) {\n    this.ele?.addEventListener('click', cb);\n\n    return () => this.ele?.removeEventListener('click', cb);\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\nexport class ButtonDriver extends BaseDriver {\n  nodeName = 'descope-button';\n\n  onClick(cb: (e: Event) => void) {\n    this.ele?.addEventListener('click', cb);\n\n    return () => this.ele?.removeEventListener('click', cb);\n  }\n\n  disable() {\n    this.ele?.setAttribute('disabled', 'true');\n  }\n\n  enable() {\n    this.ele?.removeAttribute('disabled');\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\nexport class FlowDriver extends BaseDriver {\n  nodeName = 'descope-wc';\n\n  set projectId(projectId: string) {\n    this.ele?.setAttribute('project-id', projectId);\n  }\n\n  set baseUrl(baseUrl: string) {\n    this.ele?.setAttribute('base-url', baseUrl);\n  }\n\n  set flowId(flowId: string) {\n    this.ele?.setAttribute('flow-id', flowId);\n  }\n\n  set theme(theme: string | null | undefined) {\n    if (!theme) {\n      this.ele?.removeAttribute('theme');\n    } else {\n      this.ele?.setAttribute('theme', theme);\n    }\n  }\n\n  onSuccess(cb: () => void) {\n    this.ele?.addEventListener('success', cb);\n\n    return () => this.ele?.removeEventListener('success', cb);\n  }\n  onPageUpdated(cb: () => void) {\n    this.ele?.addEventListener('page-updated', cb);\n\n    return () => this.ele?.removeEventListener('page-updated', cb);\n  }\n}\n","import { ButtonDriver } from './ButtonDriver';\n\nexport class GenericFlowButtonDriver extends ButtonDriver {\n  get flowId(): string {\n    return this.ele?.getAttribute('flow-id') || '';\n  }\n  get enableMode(): 'onlyOne' | 'oneOrMore' | 'always' {\n    return this.ele?.getAttribute('enable-mode') as\n      | 'onlyOne'\n      | 'oneOrMore'\n      | 'always';\n  }\n}\n","import { compareArrays } from '@descope/sdk-helpers';\nimport { BaseDriver } from '../BaseDriver';\nimport { GridCustomColumnDriver } from './GridCustomColumnDriver';\nimport { GridTextColumnDriver } from './GridTextColumnDriver';\n\ntype Column = {\n  path: string;\n  header: string;\n  type: string;\n  attrs: Record<string, string>;\n};\n\nconst columnRegex = /^descope-grid-([^-]+)-column$/;\n\nconst driversMapping = {\n  text: GridTextColumnDriver,\n  custom: GridCustomColumnDriver,\n};\n\nexport class GridDriver<T extends any> extends BaseDriver {\n  nodeName = 'descope-grid';\n  #onColumnsChangeCb: (columns: Column[]) => void;\n\n  onSelectedItemsChange(cb: (e: CustomEvent<{ value: T[] }>) => void) {\n    this.ele?.addEventListener('selected-items-changed', cb);\n\n    return () => this.ele?.removeEventListener('selected-items-changed', cb);\n  }\n\n  get ele() {\n    return super.ele as Element & {\n      data: T[];\n      columns: Column[];\n      renderColumn: ({ path, header, type, attrs }: Column) => string;\n    };\n  }\n\n  get data() {\n    return this.ele?.data;\n  }\n\n  set data(data: T[]) {\n    if (this.ele) this.ele.data = data;\n  }\n\n  get columns() {\n    if (!this.ele) return [];\n    return Array.from(this.ele.children).reduce((acc, child) => {\n      const columnType = columnRegex.exec(child.localName)?.[1];\n      const Driver = driversMapping[columnType];\n\n      if (!Driver) return acc;\n\n      acc.push(new Driver(child, { logger: this.logger }));\n\n      return acc;\n    }, []);\n  }\n\n  filterColumns(filterFn: (col: Column) => boolean) {\n    const filteredColumns = this.ele.columns?.filter(filterFn);\n    if (!filteredColumns || !this.ele.columns) return;\n    if (!compareArrays(filteredColumns, this.ele.columns)) {\n      this.ele.columns = filteredColumns;\n      this.#onColumnsChangeCb?.(filteredColumns);\n    }\n  }\n\n  onColumnsChange(cb: (columns: Column[]) => void) {\n    this.#onColumnsChangeCb = cb;\n  }\n\n  set renderColumn(\n    renderFn: ({ path, header, type, attrs }: Column) => string,\n  ) {\n    this.ele.renderColumn = renderFn;\n  }\n}\n","import { BaseDriver } from '../BaseDriver';\n\nexport class GridTextColumnDriver extends BaseDriver {\n  nodeName = 'descope-grid-text-column';\n\n  onSortDirectionChange(\n    cb: (e: CustomEvent<{ value: 'asc' | 'desc' | null }>) => void,\n  ) {\n    this.ele?.addEventListener('direction-changed', cb);\n\n    return () => this.ele?.removeEventListener('selected-items-changed', cb);\n  }\n}\n","import { BaseDriver } from '../BaseDriver';\n\nexport class GridCustomColumnDriver extends BaseDriver {\n  nodeName = 'descope-grid-custom-column';\n\n  onSortDirectionChange(\n    cb: (e: CustomEvent<{ value: 'asc' | 'desc' | null }>) => void,\n  ) {\n    this.ele?.addEventListener('direction-changed', cb);\n\n    return () => this.ele?.removeEventListener('selected-items-changed', cb);\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\nexport class LinkDriver extends BaseDriver {\n  nodeName = 'descope-link';\n\n  get ele() {\n    return super.ele as Element & {\n      innerText: string;\n      getAttribute: (name: string) => string | null;\n    };\n  }\n\n  get href() {\n    return this.ele?.getAttribute('href');\n  }\n\n  set href(href: string) {\n    this.ele?.setAttribute('href', href ?? '');\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\nexport class ModalDriver extends BaseDriver {\n  #modalContent: HTMLTemplateElement;\n\n  beforeOpen: undefined | (() => void | Promise<void>);\n\n  afterClose: undefined | (() => void);\n\n  nodeName = 'descope-modal';\n\n  close() {\n    this.ele?.removeAttribute('opened');\n    this.afterClose?.();\n  }\n\n  async open() {\n    await this.beforeOpen?.();\n    this.ele?.setAttribute('opened', 'true');\n  }\n\n  reset() {\n    if (this.ele) this.ele.innerHTML = '';\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n    this.#modalContent &&\n      this.ele?.append(this.#modalContent.content.cloneNode(true));\n  }\n\n  setContent(template: HTMLTemplateElement) {\n    this.#modalContent = template;\n    this.reset();\n  }\n\n  remove() {\n    this.ele?.remove();\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\nexport class MultiSelectDriver extends BaseDriver {\n  nodeName = 'descope-multi-select-combo-box';\n\n  async setData(data: { label: string; value: string }[]) {\n    (await this.asyncEle)?.setAttribute('data', JSON.stringify(data.sort()));\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\nexport class NotificationDriver extends BaseDriver {\n  nodeName = 'descope-notification';\n\n  close() {\n    this.ele?.removeAttribute('opened');\n  }\n\n  show() {\n    this.ele?.setAttribute('opened', 'true');\n  }\n\n  setContent(template: HTMLTemplateElement) {\n    this.ele.innerHTML = '';\n    this.ele.appendChild(template.content.cloneNode(true));\n  }\n\n  remove() {\n    this.ele?.remove();\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\ntype Data = {\n  id: string;\n  name: string;\n  description?: string;\n  logo?: string;\n  isConnected?: boolean;\n}[];\n\ntype Detail = { id: string; action: string };\n\nexport class OutboundAppsListDriver extends BaseDriver {\n  nodeName = 'descope-outbound-apps';\n\n  set data(data: Data) {\n    if (this.ele) this.ele.data = data;\n  }\n\n  get data() {\n    return this.ele?.data;\n  }\n\n  get ele() {\n    return super.ele as Element & {\n      data: Data;\n    };\n  }\n\n  get connectFlowId() {\n    return this.ele?.getAttribute('connect-flow-id') || '';\n  }\n\n  get disconnectFlowId() {\n    return this.ele?.getAttribute('disconnect-flow-id') || '';\n  }\n\n  onConnectClick(cb: (detail: Detail) => void) {\n    const handler = (e: CustomEvent<Detail>) => cb(e.detail);\n    this.ele?.addEventListener('connect-clicked', handler);\n\n    return () => this.ele?.removeEventListener('connect-clicked', handler);\n  }\n\n  onDisconnectClick(cb: (detail: Detail) => void) {\n    const handler = (e: CustomEvent<Detail>) => cb(e.detail);\n    this.ele?.addEventListener('disconnect-clicked', handler);\n\n    return () => this.ele?.removeEventListener('disconnect-clicked', handler);\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\nexport class SingleSelectDriver extends BaseDriver {\n  nodeName = 'descope-combo-box';\n\n  onInput(cb: (e: InputEvent) => void) {\n    this.ele?.addEventListener('input', cb);\n\n    return () => this.ele?.removeEventListener('input', cb);\n  }\n\n  get value() {\n    return (<HTMLInputElement>this.ele)?.value;\n  }\n\n  set value(value: string) {\n    if (this.ele) {\n      (<HTMLInputElement>this.ele).value = value;\n    }\n  }\n\n  async setData(data: { label: string; value: string }[]) {\n    (await this.asyncEle)?.setAttribute('data', JSON.stringify(data.sort()));\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\nexport class TextDriver extends BaseDriver {\n  nodeName = 'descope-text';\n\n  get ele() {\n    return super.ele as Element & { innerText: string };\n  }\n\n  get text() {\n    return this.ele?.innerText;\n  }\n\n  set text(content: string) {\n    if (this.ele) this.ele.innerText = content;\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\nexport class TextFieldDriver extends BaseDriver {\n  nodeName = 'descope-text-field';\n\n  onInput(cb: (e: InputEvent) => void) {\n    this.ele?.addEventListener('input', cb);\n\n    return () => this.ele?.removeEventListener('input', cb);\n  }\n\n  get value() {\n    return (<HTMLInputElement>this.ele)?.value;\n  }\n\n  set value(value: string) {\n    if (this.ele) {\n      (<HTMLInputElement>this.ele).value = value;\n    }\n  }\n\n  disable() {\n    this.ele?.setAttribute('disabled', 'true');\n  }\n\n  enable() {\n    this.ele?.removeAttribute('disabled');\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\nexport class UserAttributeDriver extends BaseDriver {\n  nodeName = 'descope-user-attribute';\n\n  set value(value: string) {\n    this.ele?.setAttribute('value', value);\n  }\n\n  set badgeLabel(label: string) {\n    this.ele?.setAttribute('badge-label', label);\n  }\n\n  get label() {\n    return this.ele?.getAttribute('label') || '';\n  }\n\n  get editFlowId() {\n    return this.ele?.getAttribute('edit-flow-id') || '';\n  }\n\n  get deleteFlowId() {\n    return this.ele?.getAttribute('delete-flow-id') || '';\n  }\n\n  onEditClick(cb: (e: Event) => void) {\n    this.ele?.addEventListener('edit-clicked', cb);\n\n    return () => this.ele?.removeEventListener('edit-clicked', cb);\n  }\n\n  onDeleteClick(cb: (e: Event) => void) {\n    this.ele?.addEventListener('delete-clicked', cb);\n\n    return () => this.ele?.removeEventListener('delete-clicked', cb);\n  }\n}\n","import { BaseDriver } from './BaseDriver';\n\nexport class UserAuthMethodDriver extends BaseDriver {\n  nodeName = 'descope-user-auth-method';\n\n  set fulfilled(isFulfilled: boolean) {\n    isFulfilled\n      ? this.ele?.setAttribute('fulfilled', 'true')\n      : this.ele?.removeAttribute('fulfilled');\n  }\n\n  onUnfulfilledButtonClick(cb: (e: Event) => void) {\n    this.ele?.addEventListener('button-clicked', cb);\n\n    return () => this.ele?.removeEventListener('button-clicked', cb);\n  }\n\n  onFulfilledButtonClick(cb: (e: Event) => void) {\n    this.ele?.addEventListener('fulfilled-button-clicked', cb);\n\n    return () => this.ele?.removeEventListener('fulfilled-button-clicked', cb);\n  }\n\n  get flowId() {\n    return this.ele?.getAttribute('flow-id');\n  }\n\n  get fulfilledFlowId() {\n    return this.ele?.getAttribute('fulfilled-flow-id');\n  }\n}\n"],"names":["BaseDriver","constructor","refOrRefFn","config","_BaseDriver_ele","set","this","nodeName","__classPrivateFieldSet","logger","asyncEle","async","ele","timeout","Promise","resolve","interval","setInterval","element","clearInterval","setTimeout","waitForElement","__classPrivateFieldGet","call","localName","_b","debug","Error","_a","AppsListDriver","data","super","AvatarDriver","displayName","name","setAttribute","image","imgUrl","flowId","getAttribute","onClick","cb","addEventListener","removeEventListener","ButtonDriver","disable","enable","removeAttribute","FlowDriver","projectId","baseUrl","theme","onSuccess","onPageUpdated","GenericFlowButtonDriver","enableMode","columnRegex","driversMapping","text","onSortDirectionChange","custom","GridDriver","_GridDriver_onColumnsChangeCb","onSelectedItemsChange","columns","Array","from","children","reduce","acc","child","columnType","exec","Driver","push","filterColumns","filterFn","filteredColumns","filter","compareArrays","onColumnsChange","renderColumn","renderFn","LinkDriver","href","ModalDriver","_ModalDriver_modalContent","close","afterClose","open","beforeOpen","reset","innerHTML","append","content","cloneNode","setContent","template","remove","MultiSelectDriver","setData","JSON","stringify","sort","NotificationDriver","show","appendChild","OutboundAppsListDriver","connectFlowId","disconnectFlowId","onConnectClick","handler","e","detail","onDisconnectClick","SingleSelectDriver","onInput","value","TextDriver","innerText","TextFieldDriver","UserAttributeDriver","badgeLabel","label","editFlowId","deleteFlowId","onEditClick","onDeleteClick","UserAuthMethodDriver","fulfilled","isFulfilled","onUnfulfilledButtonClick","onFulfilledButtonClick","fulfilledFlowId"],"mappings":"8IAUaA,EAQX,WAAAC,CAAYC,EAAwBC,GAPpCC,EAAiBC,IAAAC,UAAA,GAKjBA,KAAQC,SAAG,GAGTC,EAAAF,KAAIF,EAAQF,EAAU,KACtBI,KAAKG,OAASN,EAAOM,MACtB,CAED,YAAIC,GACF,MCtB0BC,OAAOC,EAAiBC,IACpD,IAAIC,SAAyBC,IAC3B,MAAMC,EAAWC,aAAY,KAC3B,MAAMC,EAAyB,mBAARN,EAAqBA,IAAQA,EAChDM,IACFC,cAAcH,GACdD,EAAQG,GACT,GACA,KACHE,YAAW,KACTD,cAAcH,GACdD,EAAQ,KAAK,GACZF,EAAQ,IDUJQ,CAAeC,EAAAhB,YAAW,IAClC,CAED,OAAIM,WACF,MAAMA,EAA2B,mBAAdU,EAAAhB,KAASF,EAAA,KAAkBkB,EAAAhB,KAAIF,EAAA,KAAJmB,KAAAjB,MAAcgB,EAAAhB,KAAIF,EAAA,KAChE,OAAKQ,GASDA,aAAA,EAAAA,EAAKY,aAAclB,KAAKC,kBAC1BkB,EAAAnB,KAAKG,uBAAQiB,MACX,qCAAqCpB,KAAKC,wBAAwBK,EAAIY,cACtEG,SAGK,MAGFf,GAjBQ,QAAbgB,EAAAtB,KAAKG,cAAQ,IAAAmB,GAAAA,EAAAF,MACX,uCAAuCpB,KAAKC,WAC5C,IAAIoB,OAGC,KAaV,gBE5CG,MAAOE,UAAuB7B,EAApC,WAAAC,uBACEK,KAAQC,SAAG,mBAeZ,CAbC,QAAIuB,CAAKA,GACHxB,KAAKM,MAAKN,KAAKM,IAAIkB,KAAOA,EAC/B,CAED,QAAIA,SACF,OAAe,UAARxB,KAAKM,WAAG,IAAAgB,OAAA,EAAAA,EAAEE,IAClB,CAED,OAAIlB,GACF,OAAOmB,MAAMnB,GAGd,ECjBG,MAAOoB,UAAqBhC,EAAlC,WAAAC,uBACEK,KAAQC,SAAG,gBAmBZ,CAjBC,eAAI0B,CAAYC,SACJ,QAAVN,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAO,aAAa,eAAgBD,EACxC,CAED,SAAIE,CAAMC,SACE,QAAVT,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAO,aAAa,MAAOE,EAC/B,CAED,UAAIC,SACF,eAAOV,EAAAtB,KAAKM,0BAAK2B,aAAa,UAC/B,CAED,OAAAC,CAAQC,SAGN,OAFU,QAAVb,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAc,iBAAiB,QAASD,GAE7B,KAAK,IAAAb,EAAC,OAAU,QAAVA,EAAAtB,KAAKM,WAAK,IAAAgB,OAAA,EAAAA,EAAAe,oBAAoB,QAASF,EAAG,CACxD,ECnBG,MAAOG,UAAqB5C,EAAlC,WAAAC,uBACEK,KAAQC,SAAG,gBAeZ,CAbC,OAAAiC,CAAQC,SAGN,OAFU,QAAVb,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAc,iBAAiB,QAASD,GAE7B,KAAK,IAAAb,EAAC,OAAU,QAAVA,EAAAtB,KAAKM,WAAK,IAAAgB,OAAA,EAAAA,EAAAe,oBAAoB,QAASF,EAAG,CACxD,CAED,OAAAI,SACY,QAAVjB,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAO,aAAa,WAAY,OACpC,CAED,MAAAW,SACU,QAARlB,EAAAtB,KAAKM,WAAG,IAAAgB,GAAAA,EAAEmB,gBAAgB,WAC3B,ECfG,MAAOC,UAAmBhD,EAAhC,WAAAC,uBACEK,KAAQC,SAAG,YAgCZ,CA9BC,aAAI0C,CAAUA,SACF,QAAVrB,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAO,aAAa,aAAcc,EACtC,CAED,WAAIC,CAAQA,SACA,QAAVtB,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAO,aAAa,WAAYe,EACpC,CAED,UAAIZ,CAAOA,SACC,QAAVV,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAO,aAAa,UAAWG,EACnC,CAED,SAAIa,CAAMA,WACHA,EAGO,QAAV1B,EAAAnB,KAAKM,WAAK,IAAAa,GAAAA,EAAAU,aAAa,QAASgB,GAFxB,QAARvB,EAAAtB,KAAKM,WAAG,IAAAgB,GAAAA,EAAEmB,gBAAgB,QAI7B,CAED,SAAAK,CAAUX,SAGR,OAFU,QAAVb,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAc,iBAAiB,UAAWD,GAE/B,KAAK,IAAAb,EAAC,OAAU,QAAVA,EAAAtB,KAAKM,WAAK,IAAAgB,OAAA,EAAAA,EAAAe,oBAAoB,UAAWF,EAAG,CAC1D,CACD,aAAAY,CAAcZ,SAGZ,OAFU,QAAVb,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAc,iBAAiB,eAAgBD,GAEpC,KAAK,IAAAb,EAAC,OAAU,QAAVA,EAAAtB,KAAKM,WAAK,IAAAgB,OAAA,EAAAA,EAAAe,oBAAoB,eAAgBF,EAAG,CAC/D,EChCG,MAAOa,UAAgCV,EAC3C,UAAIN,SACF,OAAe,QAARV,EAAAtB,KAAKM,WAAG,IAAAgB,OAAA,EAAAA,EAAEW,aAAa,aAAc,EAC7C,CACD,cAAIgB,SACF,eAAO3B,EAAAtB,KAAKM,0BAAK2B,aAAa,cAI/B,ECCH,MAAMiB,EAAc,gCAEdC,EAAiB,CACrBC,KCbI,cAAoC1D,EAA1C,WAAAC,uBACEK,KAAQC,SAAG,0BASZ,CAPC,qBAAAoD,CACElB,SAIA,OAFU,QAAVb,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAc,iBAAiB,oBAAqBD,GAEzC,KAAK,IAAAb,EAAC,OAAU,QAAVA,EAAAtB,KAAKM,WAAK,IAAAgB,OAAA,EAAAA,EAAAe,oBAAoB,yBAA0BF,EAAG,CACzE,GDKDmB,OEdI,cAAsC5D,EAA5C,WAAAC,uBACEK,KAAQC,SAAG,4BASZ,CAPC,qBAAAoD,CACElB,SAIA,OAFU,QAAVb,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAc,iBAAiB,oBAAqBD,GAEzC,KAAK,IAAAb,EAAC,OAAU,QAAVA,EAAAtB,KAAKM,WAAK,IAAAgB,OAAA,EAAAA,EAAAe,oBAAoB,yBAA0BF,EAAG,CACzE,IFQG,MAAOoB,UAAkC7D,EAA/C,WAAAC,uBACEK,KAAQC,SAAG,eACXuD,EAAgDzD,IAAAC,UAAA,EAwDjD,CAtDC,qBAAAyD,CAAsBtB,SAGpB,OAFU,QAAVb,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAc,iBAAiB,yBAA0BD,GAE9C,KAAK,IAAAb,EAAC,OAAU,QAAVA,EAAAtB,KAAKM,WAAK,IAAAgB,OAAA,EAAAA,EAAAe,oBAAoB,yBAA0BF,EAAG,CACzE,CAED,OAAI7B,GACF,OAAOmB,MAAMnB,GAKd,CAED,QAAIkB,SACF,OAAe,UAARxB,KAAKM,WAAG,IAAAgB,OAAA,EAAAA,EAAEE,IAClB,CAED,QAAIA,CAAKA,GACHxB,KAAKM,MAAKN,KAAKM,IAAIkB,KAAOA,EAC/B,CAED,WAAIkC,GACF,OAAK1D,KAAKM,IACHqD,MAAMC,KAAK5D,KAAKM,IAAIuD,UAAUC,QAAO,CAACC,EAAKC,WAChD,MAAMC,EAAiD,QAApC3C,EAAA4B,EAAYgB,KAAKF,EAAM9C,kBAAa,IAAAI,OAAA,EAAAA,EAAA,GACjD6C,EAAShB,EAAec,GAE9B,OAAKE,GAELJ,EAAIK,KAAK,IAAID,EAAOH,EAAO,CAAE7D,OAAQH,KAAKG,UAEnC4D,GAJaA,CAIV,GACT,IAVmB,EAWvB,CAED,aAAAM,CAAcC,WACZ,MAAMC,EAAoC,QAAlBjD,EAAAtB,KAAKM,IAAIoD,eAAS,IAAApC,OAAA,EAAAA,EAAAkD,OAAOF,GAC5CC,GAAoBvE,KAAKM,IAAIoD,UAC7Be,EAAcF,EAAiBvE,KAAKM,IAAIoD,WAC3C1D,KAAKM,IAAIoD,QAAUa,EACI,QAAvBpD,EAAAH,EAAAhB,KAAuBwD,EAAA,YAAA,IAAArC,GAAAA,EAAAF,KAAvBjB,KAA0BuE,IAE7B,CAED,eAAAG,CAAgBvC,GACdjC,EAAAF,KAAIwD,EAAsBrB,EAAE,IAC7B,CAED,gBAAIwC,CACFC,GAEA5E,KAAKM,IAAIqE,aAAeC,CACzB,gBG1EG,MAAOC,UAAmBnF,EAAhC,WAAAC,uBACEK,KAAQC,SAAG,cAgBZ,CAdC,OAAIK,GACF,OAAOmB,MAAMnB,GAId,CAED,QAAIwE,SACF,eAAOxD,EAAAtB,KAAKM,0BAAK2B,aAAa,OAC/B,CAED,QAAI6C,CAAKA,SACG,QAAVxD,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAO,aAAa,OAAQiD,QAAAA,EAAQ,GACxC,QChBG,MAAOC,UAAoBrF,EAAjC,WAAAC,uBACEqF,EAAmCjF,IAAAC,UAAA,GAMnCA,KAAQC,SAAG,eA2BZ,CAzBC,KAAAgF,WACU,QAAR3D,EAAAtB,KAAKM,WAAG,IAAAgB,GAAAA,EAAEmB,gBAAgB,UACX,QAAftB,EAAAnB,KAAKkF,kBAAU,IAAA/D,GAAAA,EAAAF,KAAAjB,KAChB,CAED,UAAMmF,iBACiB,QAAf7D,EAAAtB,KAAKoF,kBAAU,IAAA9D,OAAA,EAAAA,EAAAL,KAAAjB,OACX,QAAVmB,EAAAnB,KAAKM,WAAK,IAAAa,GAAAA,EAAAU,aAAa,SAAU,OAClC,CAED,KAAAwD,SACMrF,KAAKM,MAAKN,KAAKM,IAAIgF,UAAY,IAEnCtE,EAAAhB,KAAkBgF,EAAA,eAChB1D,EAAAtB,KAAKM,oBAAKiF,OAAOvE,EAAAhB,KAAIgF,EAAA,KAAeQ,QAAQC,WAAU,IACzD,CAED,UAAAC,CAAWC,GACTzF,EAAAF,KAAIgF,EAAiBW,EAAQ,KAC7B3F,KAAKqF,OACN,CAED,MAAAO,SACY,QAAVtE,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAsE,QACX,gBCjCG,MAAOC,UAA0BnG,EAAvC,WAAAC,uBACEK,KAAQC,SAAG,gCAKZ,CAHC,aAAM6F,CAAQtE,SACS,QAArBF,QAAOtB,KAAKI,gBAAS,IAAAkB,GAAAA,EAAEO,aAAa,OAAQkE,KAAKC,UAAUxE,EAAKyE,QACjE,ECLG,MAAOC,UAA2BxG,EAAxC,WAAAC,uBACEK,KAAQC,SAAG,sBAkBZ,CAhBC,KAAAgF,SACU,QAAR3D,EAAAtB,KAAKM,WAAG,IAAAgB,GAAAA,EAAEmB,gBAAgB,SAC3B,CAED,IAAA0D,SACY,QAAV7E,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAO,aAAa,SAAU,OAClC,CAED,UAAA6D,CAAWC,GACT3F,KAAKM,IAAIgF,UAAY,GACrBtF,KAAKM,IAAI8F,YAAYT,EAASH,QAAQC,WAAU,GACjD,CAED,MAAAG,SACY,QAAVtE,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAsE,QACX,ECRG,MAAOS,UAA+B3G,EAA5C,WAAAC,uBACEK,KAAQC,SAAG,uBAqCZ,CAnCC,QAAIuB,CAAKA,GACHxB,KAAKM,MAAKN,KAAKM,IAAIkB,KAAOA,EAC/B,CAED,QAAIA,SACF,OAAe,UAARxB,KAAKM,WAAG,IAAAgB,OAAA,EAAAA,EAAEE,IAClB,CAED,OAAIlB,GACF,OAAOmB,MAAMnB,GAGd,CAED,iBAAIgG,SACF,OAAe,QAARhF,EAAAtB,KAAKM,WAAG,IAAAgB,OAAA,EAAAA,EAAEW,aAAa,qBAAsB,EACrD,CAED,oBAAIsE,SACF,OAAe,QAARjF,EAAAtB,KAAKM,WAAG,IAAAgB,OAAA,EAAAA,EAAEW,aAAa,wBAAyB,EACxD,CAED,cAAAuE,CAAerE,SACb,MAAMsE,EAAWC,GAA2BvE,EAAGuE,EAAEC,QAGjD,OAFU,QAAVrF,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAc,iBAAiB,kBAAmBqE,GAEvC,KAAK,IAAAnF,EAAC,OAAU,QAAVA,EAAAtB,KAAKM,WAAK,IAAAgB,OAAA,EAAAA,EAAAe,oBAAoB,kBAAmBoE,EAAQ,CACvE,CAED,iBAAAG,CAAkBzE,SAChB,MAAMsE,EAAWC,GAA2BvE,EAAGuE,EAAEC,QAGjD,OAFU,QAAVrF,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAc,iBAAiB,qBAAsBqE,GAE1C,KAAK,IAAAnF,EAAC,OAAU,QAAVA,EAAAtB,KAAKM,WAAK,IAAAgB,OAAA,EAAAA,EAAAe,oBAAoB,qBAAsBoE,EAAQ,CAC1E,EC/CG,MAAOI,UAA2BnH,EAAxC,WAAAC,uBACEK,KAAQC,SAAG,mBAqBZ,CAnBC,OAAA6G,CAAQ3E,SAGN,OAFU,QAAVb,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAc,iBAAiB,QAASD,GAE7B,KAAK,IAAAb,EAAC,OAAU,QAAVA,EAAAtB,KAAKM,WAAK,IAAAgB,OAAA,EAAAA,EAAAe,oBAAoB,QAASF,EAAG,CACxD,CAED,SAAI4E,SACF,OAAmC,UAAT/G,KAAKM,WAAI,IAAAgB,OAAA,EAAAA,EAAEyF,KACtC,CAED,SAAIA,CAAMA,GACJ/G,KAAKM,MACYN,KAAKM,IAAKyG,MAAQA,EAExC,CAED,aAAMjB,CAAQtE,SACS,QAArBF,QAAOtB,KAAKI,gBAAS,IAAAkB,GAAAA,EAAEO,aAAa,OAAQkE,KAAKC,UAAUxE,EAAKyE,QACjE,ECrBG,MAAOe,UAAmBtH,EAAhC,WAAAC,uBACEK,KAAQC,SAAG,cAaZ,CAXC,OAAIK,GACF,OAAOmB,MAAMnB,GACd,CAED,QAAI8C,SACF,OAAe,UAARpD,KAAKM,WAAG,IAAAgB,OAAA,EAAAA,EAAE2F,SAClB,CAED,QAAI7D,CAAKoC,GACHxF,KAAKM,MAAKN,KAAKM,IAAI2G,UAAYzB,EACpC,ECbG,MAAO0B,UAAwBxH,EAArC,WAAAC,uBACEK,KAAQC,SAAG,oBAyBZ,CAvBC,OAAA6G,CAAQ3E,SAGN,OAFU,QAAVb,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAc,iBAAiB,QAASD,GAE7B,KAAK,IAAAb,EAAC,OAAU,QAAVA,EAAAtB,KAAKM,WAAK,IAAAgB,OAAA,EAAAA,EAAAe,oBAAoB,QAASF,EAAG,CACxD,CAED,SAAI4E,SACF,OAAmC,UAAT/G,KAAKM,WAAI,IAAAgB,OAAA,EAAAA,EAAEyF,KACtC,CAED,SAAIA,CAAMA,GACJ/G,KAAKM,MACYN,KAAKM,IAAKyG,MAAQA,EAExC,CAED,OAAAxE,SACY,QAAVjB,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAO,aAAa,WAAY,OACpC,CAED,MAAAW,SACU,QAARlB,EAAAtB,KAAKM,WAAG,IAAAgB,GAAAA,EAAEmB,gBAAgB,WAC3B,ECzBG,MAAO0E,UAA4BzH,EAAzC,WAAAC,uBACEK,KAAQC,SAAG,wBAiCZ,CA/BC,SAAI8G,CAAMA,SACE,QAAVzF,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAO,aAAa,QAASkF,EACjC,CAED,cAAIK,CAAWC,SACH,QAAV/F,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAO,aAAa,cAAewF,EACvC,CAED,SAAIA,SACF,OAAe,QAAR/F,EAAAtB,KAAKM,WAAG,IAAAgB,OAAA,EAAAA,EAAEW,aAAa,WAAY,EAC3C,CAED,cAAIqF,SACF,OAAe,QAARhG,EAAAtB,KAAKM,WAAG,IAAAgB,OAAA,EAAAA,EAAEW,aAAa,kBAAmB,EAClD,CAED,gBAAIsF,SACF,OAAe,QAARjG,EAAAtB,KAAKM,WAAG,IAAAgB,OAAA,EAAAA,EAAEW,aAAa,oBAAqB,EACpD,CAED,WAAAuF,CAAYrF,SAGV,OAFU,QAAVb,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAc,iBAAiB,eAAgBD,GAEpC,KAAK,IAAAb,EAAC,OAAU,QAAVA,EAAAtB,KAAKM,WAAK,IAAAgB,OAAA,EAAAA,EAAAe,oBAAoB,eAAgBF,EAAG,CAC/D,CAED,aAAAsF,CAActF,SAGZ,OAFU,QAAVb,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAc,iBAAiB,iBAAkBD,GAEtC,KAAK,IAAAb,EAAC,OAAU,QAAVA,EAAAtB,KAAKM,WAAK,IAAAgB,OAAA,EAAAA,EAAAe,oBAAoB,iBAAkBF,EAAG,CACjE,ECjCG,MAAOuF,UAA6BhI,EAA1C,WAAAC,uBACEK,KAAQC,SAAG,0BA2BZ,CAzBC,aAAI0H,CAAUC,WACZA,EACc,QAAVtG,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAO,aAAa,YAAa,gBACpCV,EAAAnB,KAAKM,oBAAKmC,gBAAgB,YAC/B,CAED,wBAAAoF,CAAyB1F,SAGvB,OAFU,QAAVb,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAc,iBAAiB,iBAAkBD,GAEtC,KAAK,IAAAb,EAAC,OAAU,QAAVA,EAAAtB,KAAKM,WAAK,IAAAgB,OAAA,EAAAA,EAAAe,oBAAoB,iBAAkBF,EAAG,CACjE,CAED,sBAAA2F,CAAuB3F,SAGrB,OAFU,QAAVb,EAAAtB,KAAKM,WAAK,IAAAgB,GAAAA,EAAAc,iBAAiB,2BAA4BD,GAEhD,KAAK,IAAAb,EAAC,OAAU,QAAVA,EAAAtB,KAAKM,WAAK,IAAAgB,OAAA,EAAAA,EAAAe,oBAAoB,2BAA4BF,EAAG,CAC3E,CAED,UAAIH,SACF,eAAOV,EAAAtB,KAAKM,0BAAK2B,aAAa,UAC/B,CAED,mBAAI8F,SACF,eAAOzG,EAAAtB,KAAKM,0BAAK2B,aAAa,oBAC/B"}